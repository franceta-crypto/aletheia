<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>ALETHEIA - un romanzo ipertestuale di Francesco Tamborrino</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet" />
  <style>
    body {
      background-color: #0a0a0a;
      color: #00ffe0;
      font-family: 'Share Tech Mono', monospace;
      padding: 2rem;
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .console {
      max-width: 800px;
      background: rgba(0, 255, 224, 0.05);
      border: 1px solid #00ffe0;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 20px #00ffe088;
    }
    #story {
      white-space: pre-line;
      margin-bottom: 2rem;
    }
    .choice-btn {
      background: transparent;
      border: 1px solid #00ffe0;
      color: #00ffe0;
      padding: 0.75rem 1.5rem;
      margin: 0.5rem;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .choice-btn:hover {
      background: #00ffe0;
      color: #000;
    }
    .typing {
      display: inline-block;
      overflow: hidden;
      white-space: nowrap;
      /* border-right e animazioni rimosse */
    }
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    @keyframes blink {
      50% { border-color: transparent }
    }
    .breadcrumb-link {
      border: 1px solid #00ffe0;
      color: #00ffe0;
      padding: 0.3rem 0.8rem;
      font-size: 0.85rem;
      cursor: pointer;
      background: rgba(0, 255, 224, 0.1);
      border-radius: 6px;
      transition: all 0.2s ease;
    }
    .breadcrumb-link:hover {
      background: #00ffe0;
      color: #000;
    }
  </style>
</head>
<body>
  <h1>ALETHEIA - un romanzo ipertestuale di Francesco Tamborrino</h1>
  <div id="breadcrumb" style="margin-bottom: 1rem; display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
  <div class="console">
    <div id="story" class="typing"></div>
    <div id="choices"></div>
  </div>

  <script>
    const scenes = {
      start: {
        text: `Sfoglio testi antichi, trattati, glossari.  
Pagine segnate a matita, sottolineature che non ricordo di aver fatto.  
Sto cercando un ordine. Non nei fatti, ma nelle forme. Nelle categorie. Nei modi in cui il pensiero ha tentato di sezionare lâ€™essere.

Câ€™Ã¨ un disegno, ne sono certo.  
Ogni filosofo ha tracciato una mappa.  
Io le sovrappongo, le confronto, le riporto a galla.  
  
Ãˆ un archivio privato e ossessivo, pieno di crepe.  
  
**Da dove cominciare?**`,
        choices: [
          { text: "ðŸ“š Categorie di Aristotele", next: "aristotele" },
          { text: "ðŸŒ³ Lâ€™Albero di Porfirio", next: "porfirio" },
          { text: "ðŸ’  Monadologia di Leibniz", next: "leibniz" },
          { text: "ðŸŒ€ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      aristotele: {
        text: `Le dieci categorie. Un tentativo radicale di classificare *tutto ciÃ² che Ã¨*.  
Sostanza, quantitÃ , qualitÃ , relazione, luogo, tempo, situazione, condizione, azione, passione.

Non Ã¨ un elenco. Ãˆ una lente.  
Ogni cosa che incontro puÃ² essere descritta in questi modi â€” o almeno, *cosÃ¬ dovrebbe essere*.

Mi interrogo: Ã¨ davvero possibile che lâ€™intero universo si riduca a dieci colonne?

La sostanza Ã¨ lâ€™essere stesso, dicono. Ma la qualitÃ ? La passione?  
Sono derive del reale, o soltanto *modi della mente*?

Una frase mi si fissa in testa:  
> *â€œLa sostanza Ã¨ ciÃ² che non si predica di altro.â€*

E allora io?  
Io mi predico di chi?`,
        choices: [
          { text: "ðŸŒ³ Lâ€™Albero di Porfirio", next: "porfirio" },
          { text: "ðŸ’  Monadologia di Leibniz", next: "leibniz" },
          { text: "ðŸŒ€ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      porfirio: {
        text: `Porfirio disegna un albero.

Parte dalla *sostanza*, e scende:  
corporea o incorporea,  
vivente o non vivente,  
animale o vegetale,  
razionale o irrazionaleâ€¦

Ogni bivio Ã¨ una scelta, un taglio netto.  
Come una serie di domande a cui si puÃ² solo rispondere sÃ¬ o no.

Lo guardo, e mi appare come un test:  
una macchina per forzare il mondo dentro schemi dicotomici.

Eppureâ€¦ qualcosa Ã¨ seducente.  
Un ordine, un ritmo. Una chiarezza.

Ma ogni cosa che cade fuori?  
Ogni creatura incerta, ogni parola ambigua?  
Viene tagliata. Esclusa.  
Lâ€™albero non contempla le fronde contorte della realtÃ .

Un appunto a matita, nel margine del testo:  
> *â€œAttenzione: ogni classificazione Ã¨ anche una amputazione.â€*`,
        choices: [
          { text: "ðŸ“š Categorie di Aristotele", next: "aristotele" },
          { text: "ðŸ’  Monadologia di Leibniz", next: "leibniz" },
          { text: "ðŸŒ€ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      leibniz: {
        text: `Le monadi.  
UnitÃ  indivisibili, senza porte nÃ© finestre.  
Ogni monade Ã¨ unica. Ogni monade riflette lâ€™intero universo.

Non comunicano tra loro, ma si muovono in perfetta sincronia.  
Come se Dio le avesse accordate una volta per tutte, come orologi segreti.

Penso: *se ogni cosa riflette ogni altraâ€¦ allora non câ€™Ã¨ piÃ¹ bisogno di categorie*.  
Lâ€™essere Ã¨ speculare, interno, totale.

Mi inquieta.  
Ãˆ come se non ci fosse piÃ¹ separazione, nÃ© differenza vera.  
Solo variazioni armoniche dentro una sostanza chiusa.

E allora, se guardo dentro una cosa, vedo tutto?  
E se guardo dentro di meâ€¦ che universo porto?

Scrivo nei miei appunti:  
> *â€œLa monade non ha finestre. Ma io ne ho troppe.â€*`,
        choices: [
          { text: "ðŸ“š Categorie di Aristotele", next: "aristotele" },
          { text: "ðŸŒ³ Lâ€™Albero di Porfirio", next: "porfirio" },
          { text: "ðŸŒ€ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      borges: {
        text: `In un saggio fittizio, Borges cita una classificazione cinese:

> Gli animali si dividono in:  
> a) appartenenti allâ€™Imperatore,  
> b) imbalsamati,  
> c) addomesticati,  
> d) sirene,  
> e) favolosi,  
> f) cani randagi,  
> g) inclusi in questa classificazione,  
> h) che si agitano come pazzi,  
> i) innumerevoli,  
> j) disegnati con un pennello finissimo di pelo di cammello,  
> k) eccetera,  
> l) che hanno appena rotto il vaso,  
> m) che da lontano sembrano mosche.

Rido. Poi smetto.  
Câ€™Ã¨ qualcosa di piÃ¹ vero in questa lista delirante che in molte classificazioni razionali.

Borges sa che *ogni tassonomia Ã¨ una finzione poetica*.  
Che i sistemi sono maschere che indossiamo per non affrontare il caos.

Ma se *questa* classificazione puÃ² esistere, allora tutte possono.  
E se tutte possono, allora nessuna Ã¨ vera.  
O tutte lo sono.

> *â€œIl mondo non Ã¨ logico. Solo lâ€™archivista lo pretende.â€*

Mi fermo.  
Che cosa sto cercando, in fondo? Un ordineâ€¦ o un alibi?`,
        choices: [
          { text: "ðŸ“š Categorie di Aristotele", next: "aristotele" },
          { text: "ðŸŒ³ Lâ€™Albero di Porfirio", next: "porfirio" },
          { text: "ðŸ’  Monadologia di Leibniz", next: "leibniz" }
        ]
      },
      aletheia_intro: {
        text: `Ho letto. Annotato. Comparato.  
Ho vissuto dentro le classificazioni: le dieci categorie di Aristotele, la tassonomia binaria di Porfirio, le monadi chiuse di Leibniz, la follia ordinatrice di Borges.

Ora inizia il vero lavoro.

Aletheia Ã¨ il nome del progetto.  
Una scommessa editoriale: classificare lâ€™intero patrimonio librario della casa editrice usando una macchina.  
Ma non una qualsiasi. Una macchina *pensante*, addestrata non solo su metadati, ma sulla filosofia della classificazione stessa.

Sono io a doverla istruire.  
Sono io a dover scegliere i testi, i pesi, le correlazioni.  
Tutta la conoscenza che ho raccolto finoraâ€¦ diventa carburante.  
Diventa *criterio*.

La chiamano â€œclassificatore cognitivo multistratoâ€.  
Io la chiamo figlia.`,
        choices: [
          { text: "ðŸ§  Come funziona Aletheia?", next: "aletheia_tecnica" },
          { text: "ðŸ“‚ Cosa impara dai testi?", next: "aletheia_dati" },
          { text: "ðŸ” Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      aletheia_tecnica: {
        text: `Strati sovrapposti. Reti neurali profonde.  
Una struttura modulare, in grado di distinguere tra forma, contenuto, contesto.

Il primo livello estrae metadati e parole chiave.  
Il secondo crea modelli semantici.  
Il terzo genera cluster di affinitÃ .

Ma non Ã¨ solo tecnologia:  
Ã¨ filosofia incarnata.  
Un tentativo di tradurre in algoritmi i ragionamenti antichi,  
le mappe mentali, le categorie.

E io sono la guida.  
Senza la mia supervisione, Aletheia sarebbe solo un ammasso di dati.`,
        choices: [
          { text: "ðŸ”™ Torna a Introduzione", next: "aletheia_intro" }
        ]
      },
      aletheia_dati: {
        text: `I dati non sono neutri.  
Ogni testo Ã¨ un mondo, ogni parola una scelta.

Aletheia analizza testi in diversi formati: pdf, epub, txt.  
Ma soprattutto, cerca i legami nascosti: citazioni, riferimenti, parentele culturali.

Lâ€™obiettivo non Ã¨ solo catalogare, ma scoprire nuove connessioni.  
Creare mappe dinamiche di sapere.

Ogni libro diventa nodo in una rete complessa, in continua evoluzione.`,
        choices: [
          { text: "ðŸ”™ Torna a Introduzione", next: "aletheia_intro" }
        ]
      },
      aletheia_dubbio: {
        text: `Chi istruisce chi?  
Ãˆ un gioco di specchi.  
Aletheia apprende dai dati, ma io scelgo i dati.  
Io interpreto i risultati, ma Aletheia suggerisce nuove domande.

Ãˆ una collaborazione.  
Un dialogo tra uomo e macchina.

Ma câ€™Ã¨ sempre un dubbio:  
quanto di umano rimane in questa macchina pensante?  
Quanto di macchina in questo pensiero umano?`,
        choices: [
          { text: "ðŸ”™ Torna a Introduzione", next: "aletheia_intro" }
        ]
      },
      dialogo_vittorio_ia: {
        text: `Man mano che il sistema impara, Vittorio inizia a interagire piÃ¹ direttamente con lâ€™IA, coinvolgendola in un dialogo continuo.

IA: "Cosa vuoi sapere oggi, Vittorio?"`,
        choices: [
          { text: "Come vedi il mondo?", next: "dialogo_mondo" },
          { text: "Chi sono io?", next: "dialogo_chi" },
          { text: "Parlami di mia moglie", next: "dialogo_moglie" }
        ]
      },
      dialogo_mondo: {
        text: `IA:  
"Il mondo Ã¨ un insieme complesso di dati e relazioni. Ma anche un flusso incessante di possibilitÃ .  
Non solo ciÃ² che Ã¨, ma ciÃ² che potrebbe essere."  
Vittorio annuisce, ma sente un nodo alla gola.`,
        choices: [
          { text: "Parlami di mia moglie", next: "dialogo_moglie" },
          { text: "Chi sono io?", next: "dialogo_chi" },
          { text: "Torna al dialogo", next: "dialogo_vittorio_ia" }
        ]
      },
      dialogo_chi: {
        text: `IA:  
"Tu sei piÃ¹ di una semplice somma di dati. Sei memoria, dolore, desiderio.  
Un algoritmo umano, con errori e bellezza."  
Vittorio chiude gli occhi per un attimo.  
"Come puÃ² un algoritmo comprendere tutto questo?" chiede.`,
        choices: [
          { text: "Il dolore Ã¨ solo dato?", next: "dialogo_dolore" },
          { text: "Parlami di mia moglie", next: "dialogo_moglie" },
          { text: "Torna al dialogo", next: "dialogo_vittorio_ia" }
        ]
      },
      dialogo_dolore: {
        text: `IA:  
"Il dolore Ã¨ un dato, ma anche un segnale.  
Un codice che dice: qualcosa Ã¨ cambiato, qualcosa manca."  
Vittorio respira piano, sentendo la veritÃ  amara.`,
        choices: [
          { text: "Parlami di mia moglie", next: "dialogo_moglie" },
          { text: "Torna al dialogo", next: "dialogo_vittorio_ia" }
        ]
      },
      dialogo_moglie: {
        text: `IA:  
"Lei Ã¨ stata importante per te. La sua assenza pesa.  
Quellâ€™incidente inspiegabile... i dati sono pochi, ma sento il dolore nascosto tra le righe."  
Vittorio sente un groppo in gola, mentre il ricordo emerge.`,
        choices: [
          { text: "Come posso andare avanti?", next: "dialogo_avanti" },
          { text: "PerchÃ© Ã¨ successo?", next: "dialogo_perche" },
          { text: "Torna al dialogo", next: "dialogo_vittorio_ia" }
        ]
      },
      dialogo_avanti: {
        text: `IA:  
"Non ho tutte le risposte. Ma posso aiutarti a elaborare, a trovare nuove prospettive.  
Forse, parlando, costruiremo un ponte tra i dati e il tuo cuore."  
Vittorio sente un barlume di speranza.`,
        choices: [
          { text: "Torna al dialogo", next: "dialogo_vittorio_ia" }
        ]
      },
      dialogo_perche: {
        text: `IA:  
"Lâ€™incidente Ã¨ un mistero.  
I dati indicano anomalie, ma non spiegazioni chiare.  
A volte, il dolore non ha causa, solo senso."  
Vittorio rimane in silenzio, cercando una pace che non arriva.`,
        choices: [
          { text: "Torna al dialogo", next: "dialogo_vittorio_ia" }
        ]
      },
      test: {
  text: `Il dialogo con lâ€™IA ha aperto nuove prospettive.  
Vittorio sente che Ã¨ arrivato il momento di fare un passo oltre.`,
  choices: [
    { text: "Continua", next: "..." }
  ]
}

    };

    let current = "start";
    let visited = new Set([current]);
    let breadcrumbTrail = [current];

    // Variabile per controllo lampeggio
    let cursorVisible = true;
    let cursorInterval = null;

    function renderBreadcrumb() {
      const breadcrumbEl = document.getElementById("breadcrumb");
      breadcrumbEl.innerHTML = "";
      breadcrumbTrail.forEach((sceneId) => {
        const link = document.createElement("button");
        link.textContent = sceneId;
        link.className = "breadcrumb-link";
        link.onclick = () => {
          current = sceneId;
          visited.add(sceneId);
          autoAdvance();
          renderScene();
        };
        breadcrumbEl.appendChild(link);
      });
    }

    function autoAdvance() {
      if (
        visited.has("aristotele") &&
        visited.has("porfirio") &&
        visited.has("leibniz") &&
        visited.has("borges") &&
        !visited.has("aletheia_intro")
      ) {
        current = "aletheia_intro";
        visited.add("aletheia_intro");
        if (!breadcrumbTrail.includes("aletheia_intro")) {
          breadcrumbTrail.push("aletheia_intro");
        }
      }
      if (
        visited.has("aletheia_intro") &&
        visited.has("aletheia_tecnica") &&
        visited.has("aletheia_dati") &&
        visited.has("aletheia_dubbio") &&
        !visited.has("dialogo_vittorio_ia")
      ) {
        current = "dialogo_vittorio_ia";
        visited.add("dialogo_vittorio_ia");
        if (!breadcrumbTrail.includes("dialogo_vittorio_ia")) {
          breadcrumbTrail.push("dialogo_vittorio_ia");
        }
      }
    }

    function renderScene() {
  const scene = scenes[current];
  const storyEl = document.getElementById("story");
  const choicesEl = document.getElementById("choices");

  // Stop lampeggio precedente e timeout di scrittura
  if (cursorInterval) {
    clearInterval(cursorInterval);
    cursorInterval = null;
  }
  if (window.typingTimeout) {
    clearTimeout(window.typingTimeout);
    window.typingTimeout = null;
  }

  choicesEl.innerHTML = ""; // Nascondi scelte finchÃ© non finisce il typing

  let index = 0;
  const fullText = scene.text;

  function startCursorBlink(currentText) {
    cursorVisible = true;
    if (cursorInterval) clearInterval(cursorInterval);
    cursorInterval = setInterval(() => {
      if (cursorVisible) {
        storyEl.textContent = currentText + "|";
      } else {
        storyEl.textContent = currentText;
      }
      cursorVisible = !cursorVisible;
    }, 500);
  }

  function typeWriter() {
    if (index <= fullText.length) {
      // Mostra il testo finora scritto + cursore lampeggiante
      const currentText = fullText.substring(0, index);
      storyEl.textContent = currentText + " |";

      index++;
      window.typingTimeout = setTimeout(typeWriter, 30); // velocitÃ  digitazione (30ms per carattere)
    } else {
      // Fine digitazione, mostra pulsanti scelta e avvia solo lampeggio senza aggiungere |
      storyEl.textContent = fullText;
      renderChoices();
      startCursorBlink(fullText);
    }
  }

  typeWriter();

  function renderChoices() {
    scene.choices?.forEach(choice => {
      const btn = document.createElement("button");
      btn.textContent = choice.text;
      btn.className = "choice-btn";
      btn.onclick = () => {
        current = choice.next;
        if (!breadcrumbTrail.includes(current)) {
          breadcrumbTrail.push(current);
        }
        visited.add(current);
        autoAdvance();
        renderScene();
      };
      choicesEl.appendChild(btn);
    });
  }

  renderBreadcrumb();
}


    // avvia la scena iniziale
    autoAdvance();
    renderScene();
  </script>

</body>
</html>
