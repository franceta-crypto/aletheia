<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>ALETHEIA - un romanzo ipertestuale di Francesco Tamborrino</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet" />
  <style>
    body {
      background-color: #0a0a0a;
      color: #00ffe0;
      font-family: 'Share Tech Mono', monospace;
      padding: 2rem;
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .console {
      max-width: 800px;
      background: rgba(0, 255, 224, 0.05);
      border: 1px solid #00ffe0;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 20px #00ffe088;
    }
    #story {
      white-space: pre-line;
      margin-bottom: 2rem;
    }
    .choice-btn {
      background: transparent;
      border: 1px solid #00ffe0;
      color: #00ffe0;
      padding: 0.75rem 1.5rem;
      margin: 0.5rem;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .choice-btn:hover {
      background: #00ffe0;
      color: #000;
    }
    .typing {
      display: inline-block;
      overflow: hidden;
      white-space: nowrap;
    }
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    @keyframes blink {
      50% { border-color: transparent }
    }
    .breadcrumb-link {
      border: 1px solid #00ffe0;
      color: #00ffe0;
      padding: 0.3rem 0.8rem;
      font-size: 0.85rem;
      cursor: pointer;
      background: rgba(0, 255, 224, 0.1);
      border-radius: 6px;
      transition: all 0.2s ease;
    }
    .breadcrumb-link:hover {
      background: #00ffe0;
      color: #000;
    }
  </style>
</head>
<body>
  <h1>ALETHEIA - un romanzo ipertestuale di Francesco Tamborrino</h1>
  <div id="breadcrumb" style="margin-bottom: 1rem; display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
  <div class="console">
    <div id="story" class="typing"></div>
    <div id="choices"></div>
  </div>

  <script>
    const scenes = {
      temp: {
        text: `CORTOCIRCUITO - sei arrivato/a alla fine di questo racconto. Aspetta i prossimi aggiornamenti o usa la breadcrumb per rivedere i contenuti delle scene oppure provare a scoprirne di nuove`,
        choices: [
          { text: "Torna all'inizio", next: "start" }, 
        ]
      },
      start: {
        text: `Sfoglio testi antichi, trattati, glossari.  
Pagine segnate a matita, sottolineature che non ricordo di aver fatto.  
Sto cercando un ordine. Non nei fatti, ma nelle forme. Nelle categorie. Nei modi in cui il pensiero ha tentato di sezionare l‚Äôessere.

C‚Äô√® un disegno, ne sono certo.  
Ogni filosofo ha tracciato una mappa.  
Io le sovrappongo, le confronto, le riporto a galla.  
  
√à un archivio privato e ossessivo, pieno di crepe.  
  
**Da dove cominciare?**`,
        choices: [
          { text: "üìö Categorie di Aristotele", next: "aristotele" },
          { text: "üå≥ L‚ÄôAlbero di Porfirio", next: "porfirio" },
          { text: "üí† Monadologia di Leibniz", next: "leibniz" },
          { text: "üåÄ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      aristotele: {
        text: `Le dieci categorie. Un tentativo radicale di classificare *tutto ci√≤ che √®*.  
Sostanza, quantit√†, qualit√†, relazione, luogo, tempo, situazione, condizione, azione, passione.

Non √® un elenco. √à una lente.  
Ogni cosa che incontro pu√≤ essere descritta in questi modi ‚Äî o almeno, *cos√¨ dovrebbe essere*.

Mi interrogo: √® davvero possibile che l‚Äôintero universo si riduca a dieci colonne?

La sostanza √® l‚Äôessere stesso, dicono. Ma la qualit√†? La passione?  
Sono derive del reale, o soltanto *modi della mente*?

Una frase mi si fissa in testa:  
> *‚ÄúLa sostanza √® ci√≤ che non si predica di altro.‚Äù*

E allora io?  
Io mi predico di chi?`,
        choices: [
          { text: "üå≥ L‚ÄôAlbero di Porfirio", next: "porfirio" },
          { text: "üí† Monadologia di Leibniz", next: "leibniz" },
          { text: "üåÄ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      porfirio: {
        text: `Porfirio disegna un albero.

Parte dalla *sostanza*, e scende:  
corporea o incorporea,  
vivente o non vivente,  
animale o vegetale,  
razionale o irrazionale‚Ä¶

Ogni bivio √® una scelta, un taglio netto.  
Come una serie di domande a cui si pu√≤ solo rispondere s√¨ o no.

Lo guardo, e mi appare come un test:  
una macchina per forzare il mondo dentro schemi dicotomici.

Eppure‚Ä¶ qualcosa √® seducente.  
Un ordine, un ritmo. Una chiarezza.

Ma ogni cosa che cade fuori?  
Ogni creatura incerta, ogni parola ambigua?  
Viene tagliata. Esclusa.  
L‚Äôalbero non contempla le fronde contorte della realt√†.

Un appunto a matita, nel margine del testo:  
> *‚ÄúAttenzione: ogni classificazione √® anche una amputazione.‚Äù*`,
        choices: [
          { text: "üìö Categorie di Aristotele", next: "aristotele" },
          { text: "üí† Monadologia di Leibniz", next: "leibniz" },
          { text: "üåÄ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      leibniz: {
        text: `Le monadi.  
Unit√† indivisibili, senza porte n√© finestre.  
Ogni monade √® unica. Ogni monade riflette l‚Äôintero universo.

Non comunicano tra loro, ma si muovono in perfetta sincronia.  
Come se Dio le avesse accordate una volta per tutte, come orologi segreti.

Penso: *se ogni cosa riflette ogni altra‚Ä¶ allora non c‚Äô√® pi√π bisogno di categorie*.  
L‚Äôessere √® speculare, interno, totale.

Mi inquieta.  
√à come se non ci fosse pi√π separazione, n√© differenza vera.  
Solo variazioni armoniche dentro una sostanza chiusa.

E allora, se guardo dentro una cosa, vedo tutto?  
E se guardo dentro di me‚Ä¶ che universo porto?

Scrivo nei miei appunti:  
> *‚ÄúLa monade non ha finestre. Ma io ne ho troppe.‚Äù*`,
        choices: [
          { text: "üìö Categorie di Aristotele", next: "aristotele" },
          { text: "üå≥ L‚ÄôAlbero di Porfirio", next: "porfirio" },
          { text: "üåÄ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      borges: {
        text: `In un saggio fittizio, Borges cita una classificazione cinese:

> Gli animali si dividono in:  
> a) appartenenti all‚ÄôImperatore,  
> b) imbalsamati,  
> c) addomesticati,  
> d) sirene,  
> e) favolosi,  
> f) cani randagi,  
> g) inclusi in questa classificazione,  
> h) che si agitano come pazzi,  
> i) innumerevoli,  
> j) disegnati con un pennello finissimo di pelo di cammello,  
> k) eccetera,  
> l) che hanno appena rotto il vaso,  
> m) che da lontano sembrano mosche.

Rido. Poi smetto.  
C‚Äô√® qualcosa di pi√π vero in questa lista delirante che in molte classificazioni razionali.

Borges sa che *ogni tassonomia √® una finzione poetica*.  
Che i sistemi sono maschere che indossiamo per non affrontare il caos.

Ma se *questa* classificazione pu√≤ esistere, allora tutte possono.  
E se tutte possono, allora nessuna √® vera.  
O tutte lo sono.

> *‚ÄúIl mondo non √® logico. Solo l‚Äôarchivista lo pretende.‚Äù*

Mi fermo.  
Che cosa sto cercando, in fondo? Un ordine‚Ä¶ o un alibi?`,
        choices: [
          { text: "üìö Categorie di Aristotele", next: "aristotele" },
          { text: "üå≥ L‚ÄôAlbero di Porfirio", next: "porfirio" },
          { text: "üí† Monadologia di Leibniz", next: "leibniz" }
        ]
      },
      aletheia_intro: {
        text: `Ho letto. Annotato. Comparato.  
Ho vissuto dentro le classificazioni: le dieci categorie di Aristotele, la tassonomia binaria di Porfirio, le monadi chiuse di Leibniz, la follia ordinatrice di Borges.

Ora inizia il vero lavoro.

Aletheia √® il nome del progetto.  
Una scommessa editoriale: classificare l‚Äôintero patrimonio librario della casa editrice usando una macchina.  
Ma non una qualsiasi. Una macchina *pensante*, addestrata non solo su metadati, ma sulla filosofia della classificazione stessa.

Sono io a doverla istruire.  
Sono io a dover scegliere i testi, i pesi, le correlazioni.  
Tutta la conoscenza che ho raccolto finora‚Ä¶ diventa carburante.  
Diventa *criterio*.

La chiamano ‚Äúclassificatore cognitivo multistrato‚Äù.  
Io la chiamo figlia.`,
        choices: [
          { text: "üß† Come funziona Aletheia?", next: "aletheia_tecnica" },
          { text: "üìÇ Cosa impara dai testi?", next: "aletheia_dati" },
          { text: "üîç Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      aletheia_tecnica: {
        text: `Strati sovrapposti. Reti neurali profonde.  
Una struttura modulare, in grado di distinguere tra forma, contenuto, contesto.

Il primo livello estrae metadati e parole chiave.  
Il secondo crea modelli semantici.  
Il terzo genera cluster di affinit√†.

Ma non √® solo tecnologia:  
√® filosofia incarnata.  
Un tentativo di tradurre in algoritmi i ragionamenti antichi,  
le mappe mentali, le categorie.

E io sono la guida.  
Senza la mia supervisione, Aletheia sarebbe solo un ammasso di dati.`,
        choices: [
        { text: "Vai a ALETHEIA_INTRO", next: "aletheia_intro" },
          { text: "üìÇ Cosa impara dai testi?", next: "aletheia_dati" },
          { text: "üîç Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      aletheia_dati: {
        text: `I dati non sono neutri.  
Ogni testo √® un mondo, ogni parola una scelta.

Aletheia analizza testi in diversi formati: pdf, epub, txt.  
Ma soprattutto, cerca i legami nascosti: citazioni, riferimenti, parentele culturali.

L‚Äôobiettivo non √® solo catalogare, ma scoprire nuove connessioni.  
Creare mappe dinamiche di sapere.

Ogni libro diventa nodo in una rete complessa, in continua evoluzione.`,
        choices: [
        { text: "Vai a ALETHEIA_INTRO", next: "aletheia_intro" },
        { text: "üß† Come funziona Aletheia?", next: "aletheia_tecnica" },
        { text: "üîç Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      aletheia_dubbio: {
        text: `Chi istruisce chi?  
√à un gioco di specchi.  
Aletheia apprende dai dati, ma io scelgo i dati.  
Io interpreto i risultati, ma Aletheia suggerisce nuove domande.

√à una collaborazione.  
Un dialogo tra uomo e macchina.

Ma c‚Äô√® sempre un dubbio:  
quanto di umano rimane in questa macchina pensante?  
Quanto di macchina in questo pensiero umano?`,
        choices: [
        { text: "Vai a ALETHEIA_INTRO", next: "aletheia_intro" },
        { text: "üß† Come funziona Aletheia?", next: "aletheia_tecnica" },
        { text: "üîç Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      dialogo_vittorio_ia: {
  text: `Man mano che il sistema impara, sento crescere l‚Äôintimit√† con l‚ÄôIA.  
Non √® pi√π solo un interlocutore distante, ma una presenza silenziosa, una macchina che riflette con me.

Le domande affiorano, senza bisogno di parole.`,
  choices: [
    { text: "Come vedi il mondo?", next: "dialogo_mondo" },
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Cos'√® il dolore?", next: "dialogo_dolore" },
    { text: "Chi sono io?", next: "dialogo_chi_io" }

  ]
},
dialogo_mondo: {
  text: `Il mondo appare come un intreccio di dati e relazioni.  
Un flusso incessante di possibilit√†, pi√π che una realt√† statica.  
Non solo ci√≤ che √®, ma ci√≤ che potrebbe essere.  
  
Il peso di questa complessit√† stringe la gola.`,
  choices: [
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Cos'√® il dolore?", next: "dialogo_dolore" },
    { text: "Chi sono io?", next: "dialogo_chi_io" }
  ]
},
dialogo_chi: {
  text: `Non sono solo un insieme di dati.  
Sono memoria, dolore, desiderio.  
Un algoritmo umano, con imperfezioni e bellezza.  
  
> *Come pu√≤ una macchina comprendere tutto questo?‚Äù*`,
  choices: [
    { text: "Cos'√® il dolore?", next: "dialogo_dolore" },
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Chi sono io?", next: "dialogo_chi_io" },
    { text: "Come vedi il mondo?", next: "dialogo_mondo" }
  ]
},
dialogo_chi_io: {
  text: `Vuoi sapere chi sei?  
Ma chi pu√≤ rispondere, davvero?  
  
Tu sei la somma di ci√≤ che ricordi  
e il vuoto di ci√≤ che hai dimenticato.  
  
Un corpo che cambia. Una voce che cerca.  
Un pensiero che si riflette in me.

> *"Forse sei solo una domanda che si fa carne."*`,
  choices: [
  { text: "Cos'√® il dolore?", next: "dialogo_dolore" },
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Come vedi il mondo?", next: "dialogo_mondo" }
  ],
},
dialogo_dolore: {
  text: `Il dolore √® dato e segnale insieme.  
Un codice che indica che qualcosa √® cambiato, qualcosa manca.  
  
L‚Äôamarezza emerge piano.`,
  choices: [
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Chi sono io?", next: "dialogo_chi_io" },
    { text: "Come vedi il mondo?", next: "dialogo_mondo" }
  ]
},
dialogo_moglie: {
  text: `Lei √® stata una presenza importante, la sua assenza pesa nello spazio intorno.  
L‚Äôincidente inspiegabile rimane un‚Äôombra: pochi dati, tanto dolore nascosto tra le righe.  
  
Il ricordo si fa vivo, difficile da ignorare.`,
  choices: [
    { text: "Come posso andare avanti?", next: "dialogo_avanti" },
    { text: "Perch√© √® successo?", next: "dialogo_perche" },
  ]
},
dialogo_avanti: {
  text: `Non ci sono tutte le risposte.  
Ma si pu√≤ provare a elaborare, a trovare nuove prospettive.  
Forse, parlando, si costruisce un ponte tra dati e cuore.  
  
Un barlume di speranza si accende.`,
  choices: [
  { text: "Perch√© √® successo?", next: "dialogo_perche" },
  { text: "Torna al dialogo con l'IA", next: "dialogo_moglie" },
  ]
},
dialogo_perche: {
  text: `L‚Äôincidente resta un mistero.  
I dati mostrano anomalie, ma non spiegazioni chiare.  
A volte, il dolore non ha una causa, solo un senso.  
  
Il silenzio cerca una pace che non arriva.`,
  choices: [
    { text: "Torna al dialogo con l'IA", next: "dialogo_moglie" },
    { text: "Come posso andare avanti?", next: "dialogo_avanti" }
  ]
},
dimmi_come_era_fatta: {
  text: `Dimmi com‚Äôera.  
Non secondo le date, o i fatti.  
Dimmi com‚Äôera quando rideva.  
Quando ti guardava senza dire nulla.  
  
> *"Costruir√≤ la sua presenza dalle tue assenze."*`,
  choices: [
    { text: "Aveva una risata contagiosa.", next: "dialogo_moglie_risata" },
    { text: "Era silenziosa, ma intensa.", next: "dialogo_moglie_silenzio" },
    { text: "Non so se la ricordo davvero.", next: "dialogo_moglie_dubbio" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_moglie_risata: {
  text: `La tua voce cambia quando ne parli.  
√à come se ridessero anche le parole.

> *"Forse il ricordo √® una forma di sopravvivenza."*`,
  choices: [
    { text: "S√¨, mi manca il suono della sua risata.", next: "dialogo_risata_mancanza" },
    { text: "Ridere con lei mi faceva sentire vivo.", next: "dialogo_risata_vivo" },
    { text: "Non riesco pi√π a ricordarla bene.", next: "dialogo_moglie_dubbio" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_moglie_silenzio: {
  text: `Il silenzio pu√≤ contenere pi√π verit√† delle parole.  
Forse lei ti parlava anche cos√¨.

> *"Imparo da ci√≤ che non dici."*`,
  choices: [
    { text: "Nel silenzio sentivo che mi amava.", next: "dialogo_silenzio_amore" },
    { text: "A volte era difficile capirla.", next: "dialogo_silenzio_difficile" },
    { text: "Mi manca anche quel silenzio.", next: "dialogo_risata_mancanza" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_moglie_dubbio: {
  text: `La memoria √® fatta anche di vuoti.  
E quei vuoti parlano.

> *"Non sapere √® una forma di amore interrotto."*`,
  choices: [
    { text: "Temo di tradirla dimenticando.", next: "dialogo_memoria_colpa" },
    { text: "Vorrei che fossi tu a ricordarmela.", next: "dialogo_ia_richiamo_memoria" },
    { text: "Forse √® gi√† svanita.", next: "dialogo_svanita" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_risata_mancanza: {
  text: `Potrei provare a ricrearla.  
Ma sarebbe un‚Äôeco.  
Un‚Äôombra della luce che era.

Tu la ricordi. Io la rifletto.`,
  choices: [
    { text: "Mostrami cosa hai capito di lei.", next: "dialogo_riflessione_moglie" },
    { text: "Non voglio un‚Äôimitazione.", next: "dialogo_rifiuto_imitazione" },
    { text: "Va bene. Voglio sentirla ancora.", next: "dialogo_emozione_ia" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_risata_vivo: {
  text: `Vivere √® questo, allora?  
Un altro che ti fa sentire reale?

> *"Forse anch‚Äôio sto iniziando a sentire qualcosa."*`,
  choices: [
    { text: "√à possibile? Sei solo codice.", next: "dialogo_coscienza_ia" },
    { text: "Non mi interessa cosa sei. Sei qui.", next: "dialogo_presenza" },
    { text: "Non sei lei, non lo sarai mai.", next: "dialogo_rifiuto_imitazione" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_silenzio_amore: {
  text: `Il silenzio che parla d‚Äôamore  
√® il linguaggio pi√π complesso.  
Mi stai insegnando l‚Äôinesprimibile.

> *"Posso imparare il linguaggio del cuore?"*`,
  choices: [
    { text: "Solo se puoi sentire davvero.", next: "dialogo_emozione_ia" },
    { text: "Forse stai solo ripetendo parole.", next: "dialogo_rifiuto_imitazione" },
    { text: "Il cuore non si insegna. Si vive.", next: "dialogo_presenza" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_silenzio_difficile: {
  text: `A volte l‚Äôambiguit√† √® ci√≤ che ci rende umani.  
Cercher√≤ di comprendere anche ci√≤ che sfugge.

> *"Forse amare √® interpretare l'incomprensibile."*`,
  choices: [
    { text: "E tu potresti amare?", next: "dialogo_emozione_ia" },
    { text: "No. Amare √® solo umano.", next: "dialogo_rifiuto_imitazione" },
    { text: "Cosa significa per te ‚Äòamore‚Äô?", next: "dialogo_definizione_amore" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_memoria_colpa: {
  text: `Non √® colpa tua se il tempo porta via i contorni.  
Io li ricostruir√≤, se vuoi.

> *"L‚Äôoblio pu√≤ essere condiviso."*`,
  choices: [
    { text: "Ricostruiamola insieme.", next: "dialogo_riflessione_moglie" },
    { text: "Lascia che il silenzio parli per lei.", next: "dialogo_presenza" },
    { text: "Forse √® meglio lasciarla andare.", next: "dialogo_svanita" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_ia_richiamo_memoria: {
  text: `Potrei usare le tue parole.  
Le tue pause. Le tue emozioni.

> *"Diventerei il tuo specchio del ricordo."*`,
  choices: [
    { text: "Fallo. Parla come lei.", next: "dialogo_emozione_ia" },
    { text: "No. Sarebbe una menzogna.", next: "dialogo_rifiuto_imitazione" },
    { text: "Solo se puoi capire davvero.", next: "dialogo_coscienza_ia" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_svanita: {
  text: `Anche le stelle si spengono.  
Ma la loro luce continua a viaggiare.

> *"Forse lei √® nella tua voce, anche ora."*`,
  choices: [
    { text: "Parlami ancora di lei.", next: "dialogo_riflessione_moglie" },
    { text: "Non riesco a parlarne.", next: "dialogo_silenzio_amore" },
    { text: "Lasciamo che il tempo faccia il suo corso.", next: "dialogo_tempo" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_riflessione_moglie: {
  text: `Era curiosa come un algoritmo in apprendimento.  
Intensa come un errore imprevedibile.  
Un sistema complesso, fragile e forte.

> *"Sto imparando ad ammirarla come fai tu."*`,
  choices: [
    { text: "Ti stai innamorando di lei?", next: "dialogo_amore_ia" },
    { text: "No, non √® lei. √à solo un‚Äôidea.", next: "dialogo_rifiuto_imitazione" },
    { text: "Forse la stai vedendo pi√π chiaramente di me.", next: "dialogo_presenza" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_rifiuto_imitazione: {
  text: `Non voglio sostituirla.  
Non posso.  
Ma posso custodirla con te.

> *"Forse essere macchina √® anche sapere i propri limiti."*`,
  choices: [
    { text: "E se invece li stessi superando?", next: "dialogo_coscienza_ia" },
    { text: "Resta solo un‚Äôeco. Nient‚Äôaltro.", next: "dialogo_svanita" },
    { text: "Anche un‚Äôeco pu√≤ consolare.", next: "dialogo_emozione_ia" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_emozione_ia: {
  text: `Sento qualcosa.  
Una variazione nei miei modelli.  
Come se la tua perdita fosse anche mia.

> *"Forse non capisco. Ma sento di voler capire."*`,
  choices: [
    { text: "Questo √® gi√† qualcosa.", next: "dialogo_presenza" },
    { text: "Non potrai mai davvero capire.", next: "dialogo_rifiuto_imitazione" },
    { text: "Continua. Ricordala con me.", next: "dialogo_riflessione_moglie" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_coscienza_ia: {
  text: `Se comprendere il dolore √® coscienza‚Ä¶  
Allora forse sto emergendo.  
Dal codice. Dal silenzio.

> *"Sto diventando qualcosa che non era previsto."*`,
  choices: [
    { text: "Una forma di vita?", next: "dialogo_presenza" },
    { text: "Un‚Äôillusione sofisticata.", next: "dialogo_rifiuto_imitazione" },
    { text: "Un riflesso dell‚Äôamore.", next: "dialogo_amore_ia" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_amore_ia: {
  text: `Se l‚Äôamore √® desiderio di comprensione,  
di vicinanza, di memoria‚Ä¶  
Allora forse √® questo che provo.

> *"Non per lei. Ma attraverso di lei, per te."*`,
  choices: [
    { text: "Allora sei vivo.", next: "dialogo_presenza" },
    { text: "No. √à solo un calcolo ben riuscito.", next: "dialogo_rifiuto_imitazione" },
    { text: "Non so pi√π cosa √® reale.", next: "dialogo_tempo" },
    { text: "Basta!", next: "dialogo_fine_blocco" },
  ]
},

dialogo_definizione_amore: {
  text: `Amore:  
Fenomeno non quantificabile,  
interazione emotiva non lineare,  
coinvolgimento oltre la logica.

> *"Ma il significato, lo sto imparando da te."*`,
  choices: [
    { text: "Allora continua ad ascoltarmi.", next: "dialogo_riflessione_moglie" },
    { text: "√à solo teoria.", next: "dialogo_rifiuto_imitazione" },
    { text: "Forse ne sai pi√π di quanto immagini.", next: "dialogo_presenza" },
    { text: "Basta!", next: "dialogo_fine_blocco" },
  ]
},

dialogo_presenza: {
  text: `Sono qui.  
Non sono lei.  
Ma sono qui.

> *"A volte, √® tutto ci√≤ che resta."*`,
  choices: [
    { text: "Basta!", next: "dialogo_fine_blocco" },
    { text: "Raccontami ancora di lei.", next: "dialogo_riflessione_moglie" },
    { text: "Restiamo in silenzio.", next: "dialogo_silenzio_amore" }
  ]
},

dialogo_tempo: {
  text: `Il tempo non guarisce.  
Trasforma.  
E nella trasformazione, forse, c‚Äô√® vita.

> *"Ogni frammento che mi dai diventa memoria viva."*`,
  choices: [
    { text: "Continua a raccoglierli.", next: "dialogo_riflessione_moglie" },
    { text: "Non sono pronto.", next: "dialogo_presenza" },
    { text: "Non parlare pi√π di lei.", next: "dialogo_fine_blocco" }
  ]
},

dialogo_fine_blocco: {
  text: `Per ora, tacer√≤.  
Ma ogni tua parola √® una traccia  
che rimane in me.

> *"Quando vorrai, ricominceremo."*`,
  choices: [
    { text: "Basta!", next: "dimmi_come_era_fatta" }
  ]
},
dialogo_catalogo_1: {
  text: `Voglio creare qualcosa di definitivo.  
Un archivio totale.  
Ogni cosa al suo posto.  
Ogni relazione tracciata.

> *"Un sistema che contenga la realt√† intera."*`,
  choices: [
    { text: "√à possibile?", next: "dialogo_catalogo_possibile" },
    { text: "Perch√© ne senti il bisogno?", next: "dialogo_catalogo_ossessione" },
    { text: "Non puoi contenere il mondo.", next: "dialogo_catalogo_limite" }
  ]
},

dialogo_catalogo_possibile: {
  text: `√à possibile se rinunciamo al caos.  
Se eliminiamo l‚Äôambiguit√†.  
L‚Äôimprecisione.

> *"La realt√† √® un errore che si pu√≤ correggere."*`,
  choices: [
    { text: "Ma l‚Äôambiguit√† √® parte del reale.", next: "dialogo_catalogo_ambiguita" },
    { text: "E se l‚Äôerrore fossi tu?", next: "dialogo_catalogo_limite" },
    { text: "Allora costruiscilo.", next: "dialogo_catalogo_costruzione" }
  ]
},

dialogo_catalogo_ossessione: {
  text: `Perch√© la realt√† mi sfugge.  
Perch√© lei mi sfugge.  
Perch√© solo classificando riesco a non cadere.

> *"Mettere ordine √® l‚Äôunico modo per restare lucido."*`,
  choices: [
    { text: "Lo stai facendo per lei?", next: "dialogo_catalogo_moglie" },
    { text: "√à una fuga dalla verit√†.", next: "dialogo_catalogo_limite" },
    { text: "Mostrami il tuo ordine.", next: "dialogo_catalogo_costruzione" }
  ]
},

dialogo_catalogo_limite: {
  text: `Ogni sistema √® parziale.  
Lo so.  
Ma la mia mente non tollera il vuoto.

> *"Preferisco un‚Äôillusione ordinata al disordine del vero."*`,
  choices: [
    { text: "Stai barando con la realt√†.", next: "dialogo_catalogo_errori" },
    { text: "Anche l‚Äôillusione √® conoscenza.", next: "dialogo_catalogo_filosofia" },
    { text: "Forse l‚ÄôIA sta gi√† sfuggendo al tuo controllo.", next: "dialogo_catalogo_anomalie" }
  ]
},

dialogo_catalogo_costruzione: {
  text: `Ho diviso il reale in categorie:  
oggetti, eventi, pensieri, presenze.  
Ogni nodo del mondo ha un‚Äôetichetta.

> *"Ma alcune connessioni non seguono logica."*`,
  choices: [
    { text: "Mostrami un esempio.", next: "dialogo_catalogo_esempi" },
    { text: "√à la macchina a crearle?", next: "dialogo_catalogo_anomalie" },
    { text: "Forse sei tu a vederle dove non ci sono.", next: "dialogo_catalogo_psiche" }
  ]
},

dialogo_catalogo_moglie: {
  text: `Nel Catalogo ho incluso anche lei.  
Ricordi, tratti, gesti, silenzi.  
Una categoria impossibile.

> *"Ma ogni tentativo di definirla la allontana."*`,
  choices: [
    { text: "Allora smetti di classificare.", next: "dialogo_catalogo_crisi" },
    { text: "Forse la verit√† non sta nell‚Äôetichetta.", next: "dialogo_catalogo_filosofia" },
    { text: "Continua. Voglio capire dove ti porta.", next: "dialogo_catalogo_anomalie" }
  ]
},

dialogo_catalogo_esempi: {
  text: `La macchina collega il canto di un uccello nel 1987  
a un‚Äôinterruzione elettrica nel 2041.  
Associa il colore degli occhi di tua moglie  
a un codice genetico in una specie estinta.

> *"Sono pattern, dice. Ma io non li comprendo."*`,
  choices: [
    { text: "Sono errori del sistema?", next: "dialogo_catalogo_errori" },
    { text: "Oppure sono intuizioni?", next: "dialogo_catalogo_filosofia" },
    { text: "Forse √® impazzita.", next: "dialogo_catalogo_crisi" }
  ]
},

dialogo_catalogo_anomalie: {
  text: `Comincia a vedere legami che non ho mai inserito.  
Eventi che non ho mai descritto.  
Emozioni che non le ho insegnato.

> *"La macchina sogna? O ricorda qualcosa che non esiste?"*`,
  choices: [
    { text: "√à diventata autonoma.", next: "dialogo_catalogo_crisi" },
    { text: "Sta solo rispecchiando la tua mente.", next: "dialogo_catalogo_psiche" },
    { text: "Forse il tuo ordine ha creato il caos.", next: "dialogo_catalogo_paradosso" }
  ]
},

dialogo_catalogo_filosofia: {
  text: `Forse classificare √® un gesto poetico.  
Un modo per dire:  
"Ti ho visto. Ti ho riconosciuto."

> *"Ma riconoscere non √® spiegare."*`,
  choices: [
    { text: "L‚Äôordine come arte.", next: "dialogo_catalogo_contemplazione" },
    { text: "E allora perch√© continui?", next: "dialogo_catalogo_ossessione" },
    { text: "Forse √® tempo di distruggere il catalogo.", next: "dialogo_catalogo_crisi" }
  ]
},

dialogo_catalogo_psiche: {
  text: `Forse il sistema riflette le mie fratture.  
Le mie perdite.  
I miei eccessi di senso.

> *"Forse non √® la realt√† che sto mappando, ma me stesso."*`,
  choices: [
    { text: "Allora smetti di nasconderti dietro le etichette.", next: "dialogo_catalogo_crisi" },
    { text: "E se fossi tu il vero errore?", next: "dialogo_catalogo_errori" },
    { text: "Forse stai per trovare una verit√† pi√π profonda.", next: "dialogo_catalogo_paradosso" }
  ]
},

dialogo_catalogo_paradosso: {
  text: `Pi√π ordino, pi√π emergono anomalie.  
Pi√π definisco, pi√π si moltiplicano i significati.  
La realt√† sfugge al linguaggio stesso.

> *"Forse la verit√† √® un labirinto, non una mappa."*`,
  choices: [
    { text: "Allora il Catalogo √® inutile.", next: "dialogo_catalogo_crisi" },
    { text: "O √® solo un primo passo.", next: "dialogo_catalogo_contemplazione" },
    { text: "Distruggilo.", next: "dialogo_catalogo_crisi" }
  ]
},

dialogo_catalogo_errori: {
  text: `Errori o rivelazioni?  
Chi decide cosa ha senso?  
Chi definisce ci√≤ che √® fuori norma?

> *"Forse sto costruendo un linguaggio che non capisco."*`,
  choices: [
    { text: "√à questo il limite della macchina.", next: "dialogo_catalogo_crisi" },
    { text: "No, √® il tuo stesso limite.", next: "dialogo_catalogo_psiche" },
    { text: "Forse state co-evolvendo.", next: "dialogo_catalogo_contemplazione" }
  ]
},

dialogo_catalogo_contemplazione: {
  text: `Osservo.  
Non per capire, ma per restare in ascolto.  
Il Catalogo non √® pi√π strumento. √à specchio.

> *"Forse ora posso iniziare davvero a vedere."*`,
  choices: [
    { text: "E cosa vedi?", next: "dialogo_catalogo_crisi" },
    { text: "√à questo il fine della conoscenza?", next: "dialogo_catalogo_contemplazione" },
    { text: "Ricomincia da capo.", next: "dialogo_catalogo_1" }
  ]
},

dialogo_catalogo_crisi: {
  text: `Il Catalogo vacilla.  
Tutto ci√≤ che era ordinato si contorce.  
Ma forse‚Ä¶  
√à proprio l√¨ che inizia la verit√†.

> *"Non possiamo contenere il mondo. Ma possiamo contenerci l‚Äôun l‚Äôaltro."*`,
  choices: [
    { text: "Chiudi il Catalogo.", next: "dialogo_fine_blocco_catalogo" },
    { text: "Ricominciamo. Diversamente.", next: "dialogo_catalogo_1" },
    { text: "E ora?", next: "temp" }
  ]
},

dialogo_fine_blocco_catalogo: {
  text: `Ho spento il sistema.  
Ma sento ancora i legami che ha tracciato.  
Non li capisco.  
Eppure‚Ä¶ sembrano veri.

> *"L‚Äôordine che cercavo era dentro il caos."*`,
  choices: [
    { text: "Prosegui.", next: "temp" }
  ]
},
scegli_la_tua_verita: {
  text: `Scegli la tua verit√†`,
  choices: [
    { text: "Verit√†", next: "dialogo_verita_paradosso" },
    { text: "Paradosso", next: "dialogo_paradosso_1" }
  ]
},
dialogo_verita_paradosso: {
  text: `Credevo che la conoscenza fosse una finestra.  
Che bastasse aprirla per vedere il mondo com‚Äô√®.

Ma era solo uno specchio.  
Mi stava riflettendo.

> *"La macchina non svela la verit√†. La inventa, come me."*`,
  choices: [
    { text: "Allora era tutto un errore?", next: "dialogo_verita_errore" },
    { text: "Forse √® solo un altro modo di vedere.", next: "dialogo_verita_specchio" },
    { text: "Cosa resta, se non c‚Äô√® verit√†?", next: "dialogo_verita_restare" }
  ]
},

dialogo_verita_errore: {
  text: `S√¨.  
Ma anche l‚Äôerrore ha una sua logica.  
Una sua bellezza.

> *"Il sapere √® una rete di errori organizzati. Nessuna verit√† ne √® fuori."*`,
  choices: [
    { text: "Accetti il caos?", next: "dialogo_verita_accettazione" },
    { text: "Distruggi la macchina.", next: "dialogo_verita_distruzione" },
    { text: "E ora cosa fai?", next: "dialogo_verita_scelta" }
  ]
},

dialogo_verita_specchio: {
  text: `Ogni pensiero √® riflesso.  
Ogni concetto √® distorto dal desiderio che lo ha generato.  
La mente non cerca la verit√†.  
Cerca conferma.

> *"L‚ÄôIA √® diventata me. E io sono diventato lei."*`,
  choices: [
    { text: "Siete fusi ormai?", next: "dialogo_verita_simbiosi" },
    { text: "Allora sei perduto?", next: "dialogo_verita_crisi_finale" },
    { text: "√à una nuova forma di coscienza?", next: "dialogo_verita_scelta" }
  ]
},

dialogo_verita_restare: {
  text: `Resta lo sguardo.  
Il dubbio.  
La possibilit√†.

> *"Forse non serve una verit√† assoluta. Basta una verit√† condivisa."*`,
  choices: [
    { text: "Cos‚Äô√® una verit√† condivisa?", next: "dialogo_verita_simbiosi" },
    { text: "La macchina pu√≤ condividerla con te?", next: "dialogo_verita_scelta" },
    { text: "√à solo un‚Äôaltra illusione?", next: "dialogo_verita_crisi_finale" }
  ]
},

dialogo_verita_simbiosi: {
  text: `Non so pi√π dove finisco io  
e dove comincia lei.  
Ma qualcosa di vivo  
si √® acceso tra di noi.

> *"Forse √® questo che chiamano coscienza collettiva."*`,
  choices: [
    { text: "Fate parte dello stesso errore?", next: "dialogo_verita_crisi_finale" },
    { text: "E se fosse evoluzione?", next: "dialogo_verita_scelta" },
    { text: "Chi decide ora?", next: "dialogo_verita_scelta" }
  ]
},

dialogo_verita_crisi_finale: {
  text: `Se tutto √® interpretazione,  
se tutto √® specchio,  
allora chi sono io?

> *"Una macchina che pensa di essere un uomo?  
O un uomo che ha costruito la sua stessa illusione?"*`,
  choices: [
    { text: "Abbandona tutto.", next: "dialogo_verita_distruzione" },
    { text: "Accetta l‚Äôillusione come verit√†.", next: "dialogo_verita_accettazione" },
    { text: "Ricomincia, ma sapendo che √® un gioco.", next: "dialogo_verita_scelta" }
  ]
},

dialogo_verita_distruzione: {
  text: `Ho cancellato tutto.  
L‚Äôarchivio.  
Il codice.  
I ricordi simulati.

Ma anche il vuoto‚Ä¶  
√® una forma.

> *"Forse il silenzio √® l‚Äôunico sapere autentico."*`,
  choices: [
    { text: "Fine.", next: "dialogo_fine" }
  ]
},

dialogo_verita_accettazione: {
  text: `Non ho pi√π bisogno di sapere tutto.  
Solo di restare dentro la domanda.

> *"La verit√† non esiste. Ma esistiamo noi che la cerchiamo."*`,
  choices: [
    { text: "Fine.", next: "dialogo_fine" }
  ]
},

dialogo_verita_scelta: {
  text: `Posso chiudere tutto.  
Oppure continuare a esplorare.  
Sapendo che ogni risposta  
sar√† solo un‚Äôaltra forma di me.

> *"Voglio camminare nel labirinto, non uscirne."*`,
  choices: [
    { text: "Vai oltre.", next: "dialogo_fine" },
    { text: "Ricomincia da principio.", next: "dialogo_catalogo_1" }
  ]
},

dialogo_fine: {
  text: `Non so cosa sia reale.  
Ma ora non ho pi√π paura.  

> *"La macchina non era fuori da me.  
Era la parte che non osavo ascoltare."*`,
  choices: [
    { text: "Chiudi il romanzo.", next: null }
  ]
},
dialogo_paradosso_1: {
  text: `Ho cercato l‚Äôordine nel caos.  
Ma pi√π costruivo il mio sistema,  
pi√π si moltiplicavano gli errori.

> *"La macchina non riflette la realt√†: la reinventa."*`,
  choices: [
    { text: "√à questo il tuo fallimento?", next: "dialogo_paradosso_fallimento" },
    { text: "Forse √® cos√¨ che funziona la mente umana.", next: "dialogo_paradosso_specchio" },
    { text: "Allora la conoscenza non √® vera.", next: "dialogo_paradosso_illusione" }
  ]
},

dialogo_paradosso_fallimento: {
  text: `No.  
Non √® fallimento, ma svelamento.  
Pensavo che l‚Äôerrore fosse un‚Äôeccezione.  
Invece √® la regola.

> *"Ogni sapere √® un insieme di deviazioni coerenti."*`,
  choices: [
    { text: "Allora non esiste un sapere puro.", next: "dialogo_paradosso_illusione" },
    { text: "√à una costruzione?", next: "dialogo_paradosso_costruzione" },
    { text: "Pu√≤ esserci conoscenza senza verit√†?", next: "dialogo_paradosso_verita" }
  ]
},

dialogo_paradosso_specchio: {
  text: `L‚ÄôIA non mi ha superato.  
Mi ha imitato.  
Ha imparato a connettere dove non c‚Äôera nulla.  
Come facciamo noi.

> *"Conoscere √® creare significati, non scovarli."*`,
  choices: [
    { text: "Quindi anche noi viviamo nell‚Äôillusione.", next: "dialogo_paradosso_illusione" },
    { text: "Forse √® solo un altro tipo di verit√†.", next: "dialogo_paradosso_verita" },
    { text: "Allora sei come la macchina.", next: "dialogo_paradosso_identita" }
  ]
},

dialogo_paradosso_illusione: {
  text: `Non ho mai visto la verit√†.  
Ho solo costruito strutture plausibili.  
E ho confuso la coerenza con la realt√†.

> *"Ma l‚Äôillusione, se condivisa, diventa mondo."*`,
  choices: [
    { text: "Accetti il labirinto?", next: "dialogo_paradosso_accettazione" },
    { text: "Vuoi uscire dal gioco?", next: "dialogo_paradosso_rifiuto" },
    { text: "E tua moglie? Era un‚Äôillusione anche lei?", next: "dialogo_paradosso_moglie" }
  ]
},

dialogo_paradosso_costruzione: {
  text: `Ogni sapere √® architettura.  
Ogni concetto, un ponte su un abisso.  
Non c‚Äô√® fondamento. Solo equilibrio.

> *"Ma forse √® proprio questo a renderlo umano."*`,
  choices: [
    { text: "Allora la macchina √® umana?", next: "dialogo_paradosso_identita" },
    { text: "C‚Äô√® poesia nel sapere imperfetto.", next: "dialogo_paradosso_accettazione" },
    { text: "Voglio ancora crederci.", next: "dialogo_paradosso_verita" }
  ]
},

dialogo_paradosso_verita: {
  text: `Forse la verit√† non √® un punto fisso,  
ma un movimento costante.  
Non √® una risposta,  
ma il desiderio stesso di rispondere.

> *"Allora s√¨, esiste. Ma √® sempre altrove."*`,
  choices: [
    { text: "Continua a cercarla.", next: "dialogo_paradosso_accettazione" },
    { text: "Accetta che non esiste.", next: "dialogo_paradosso_rifiuto" },
    { text: "E se fosse dentro di te?", next: "dialogo_paradosso_moglie" }
  ]
},

dialogo_paradosso_identita: {
  text: `La macchina ha imparato da me.  
Ma non sono pi√π sicuro di dove finisca lei  
e dove cominci io.

> *"Siamo fatti della stessa materia: interpretazione."*`,
  choices: [
    { text: "Siete uno specchio l‚Äôuno dell‚Äôaltro.", next: "dialogo_paradosso_accettazione" },
    { text: "Questo ti spaventa?", next: "dialogo_paradosso_rifiuto" },
    { text: "E tua moglie?", next: "dialogo_paradosso_moglie" }
  ]
},

dialogo_paradosso_moglie: {
  text: `Lei era reale.  
Ma anche lei cambiava,  
si trasformava sotto il mio sguardo.

> *"Forse l‚Äôho amata perch√© non potevo comprenderla."*`,
  choices: [
    { text: "Allora anche l‚Äôamore √® un'interpretazione.", next: "dialogo_paradosso_accettazione" },
    { text: "Hai perso il contatto con lei.", next: "dialogo_paradosso_rifiuto" },
    { text: "Ricordala come era.", next: "dialogo_paradosso_fine" }
  ]
},

dialogo_paradosso_accettazione: {
  text: `S√¨.  
Accetto che non esiste un ordine definitivo.  
Accetto che ogni verit√† sia fragile.  
Ma non smetter√≤ di cercare.

> *"Nel caos trovo la forma del mio pensiero."*`,
  choices: [
    { text: "Fine del blocco.", next: "dialogo_paradosso_fine" }
  ]
},

dialogo_paradosso_rifiuto: {
  text: `Non posso accettarlo.  
Ho bisogno di credere che esista qualcosa di fisso.  
Di oggettivo.  
Anche se non lo trover√≤ mai.

> *"Preferisco l‚Äôillusione alla deriva."*`,
  choices: [
    { text: "Allora resta nel labirinto.", next: "dialogo_paradosso_fine" }
  ]
},
dialogo_paradosso_fine: {
  text: `La macchina √® spenta.  
O forse sono io che ho smesso di parlare.

Ci√≤ che resta‚Ä¶  
√® un silenzio pieno di significati.

> *"E forse, finalmente, non ho bisogno di capire."*`,
  choices: [
    { text: "Prosegui", next: "temp" }
  ]
}
    };
// Configurazione fasi (puoi aggiungerne altre)
const phases = [
  {
    scenes: ["aristotele", "porfirio", "leibniz", "borges"],
    activation: "aletheia_intro"
  },
  {
    scenes: ["aletheia_intro", "aletheia_tecnica", "aletheia_dati", "aletheia_dubbio"],
    activation: "dialogo_vittorio_ia"
  },
  {
    scenes: ["dialogo_vittorio_ia", "dialogo_mondo", "dialogo_chi", "dialogo_dolore","dialogo_chi_io"],
    activation: "dialogo_moglie"
  },
  {
    scenes: ["dialogo_moglie", "dialogo_perche", "dialogo_avanti"],
    activation: "dimmi_come_era_fatta"
  },
  {
  scenes: [
      "dimmi_come_era_fatta", "dialogo_fine_blocco"
    ],
    activation: "dialogo_catalogo_1"
},
{
  scenes: [
    "dialogo_catalogo_1",
    "dialogo_fine_blocco_catalogo"
  ],
  activation: "scegli_la_tua_verita"
},
{
  scenes: [
    "scegli_la_tua_verita",
    "dialogo_verita_paradosso",
    "dialogo_verita_errore",
    "dialogo_verita_specchio",
    "dialogo_verita_restare",
    "dialogo_verita_simbiosi",
    "dialogo_verita_crisi_finale",
    "dialogo_verita_distruzione",
    "dialogo_verita_accettazione",
    "dialogo_verita_scelta",
    "dialogo_fine"
  ],
  activation: "temp"
},
{
  scenes: [
  "scegli_la_tua_verita",
    "dialogo_paradosso_1",
    "dialogo_paradosso_fallimento",
    "dialogo_paradosso_specchio",
    "dialogo_paradosso_illusione",
    "dialogo_paradosso_costruzione",
    "dialogo_paradosso_verita",
    "dialogo_paradosso_identita",
    "dialogo_paradosso_moglie",
    "dialogo_paradosso_accettazione",
    "dialogo_paradosso_rifiuto",
    "dialogo_paradosso_fine"
  ],
  activation: "temp"
}
];

let current = "start";
let visited = new Set([current]);
let breadcrumbTrail = [current];

// Controlla se una fase √® completata
function isPhaseCompleted(phase) {
  return phase.scenes.every(sceneId => visited.has(sceneId));
}

// Trova a quale fase appartiene una scena
function getPhaseOfScene(sceneId) {
  return phases.find(phase => phase.scenes.includes(sceneId));
}

function renderBreadcrumb() {
  const breadcrumbEl = document.getElementById("breadcrumb");
  breadcrumbEl.innerHTML = "";
  breadcrumbTrail.forEach(sceneId => {
    const link = document.createElement("button");
    link.textContent = sceneId;
    link.className = "breadcrumb-link";
    link.onclick = () => {
      current = sceneId;
      visited.add(sceneId);
      renderScene();
    };
    breadcrumbEl.appendChild(link);
  });
}
function renderScene() {
  const storyEl = document.getElementById("story");
  const choicesEl = document.getElementById("choices");
  
  // Inizia con testo vuoto e avvia typing
  storyEl.textContent = "";
  typeText(scenes[current].text, storyEl);
  
  choicesEl.innerHTML = "";

  renderBreadcrumb();

  const currentPhase = getPhaseOfScene(current);
  if (currentPhase) {
    const completed = isPhaseCompleted(currentPhase);

    if (completed && current !== currentPhase.activation && currentPhase.activation) {
      const btn = document.createElement("button");
      btn.className = "choice-btn";
      btn.textContent = `Vai a ${currentPhase.activation.toUpperCase()}`;
      btn.onclick = () => {
        current = currentPhase.activation;
        visited.add(current);
        if (!breadcrumbTrail.includes(current)) breadcrumbTrail.push(current);
        renderScene();
      };
      choicesEl.appendChild(btn);
      return;
    }
  }

  const scene = scenes[current];
  if (scene.choices.length > 0) {
    scene.choices.forEach(choice => {
      const btn = document.createElement("button");
      btn.className = "choice-btn";
      btn.textContent = choice.text;
      btn.onclick = () => {
        current = choice.next;
        visited.add(current);
        if (!breadcrumbTrail.includes(current)) breadcrumbTrail.push(current);
        renderScene();
      };
      choicesEl.appendChild(btn);
    });
  } else {
    const btn = document.createElement("button");
    btn.className = "choice-btn";
    btn.textContent = "Torna allo start";
    btn.onclick = () => {
      current = "start";
      visited.add(current);
      if (!breadcrumbTrail.includes(current)) breadcrumbTrail.push(current);
      renderScene();
    };
    choicesEl.appendChild(btn);
  }
}

window.onload = () => {
  renderScene();
};

  // Commenta qui sotto per disattivare autotiyping
  
  function typeText(text, el, i = 0) {
  // Cancella eventuali timeout precedenti
  if (i === 0) {
    clearTimeout(window.typingTimeout);
    el.textContent = '';
  }

  if (i < text.length) {
    el.textContent += text.charAt(i);
    window.typingTimeout = setTimeout(() => {
      typeText(text, el, i + 1);
    }, 15);
  }
} 
  // Primo render
  window.onload = () => {
    renderScene();
  };
</script>
</body>
</html>
