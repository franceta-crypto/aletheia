<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>ALETHEIA - un romanzo ipertestuale di Francesco Tamborrino</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet" />
  <style>
    body {
      background-color: #0a0a0a;
      color: #00ffe0;
      font-family: 'Share Tech Mono', monospace;
      padding: 2rem;
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .console {
      max-width: 800px;
      background: rgba(0, 255, 224, 0.05);
      border: 1px solid #00ffe0;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 20px #00ffe088;
    }
    #story {
      white-space: pre-line;
      margin-bottom: 2rem;
    }
    .choice-btn {
      background: transparent;
      border: 1px solid #00ffe0;
      color: #00ffe0;
      padding: 0.75rem 1.5rem;
      margin: 0.5rem;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .choice-btn:hover {
      background: #00ffe0;
      color: #000;
    }
    .typing {
      display: inline-block;
      overflow: hidden;
      white-space: nowrap;
    }
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    @keyframes blink {
      50% { border-color: transparent }
    }
    .breadcrumb-link {
      border: 1px solid #00ffe0;
      color: #00ffe0;
      padding: 0.3rem 0.8rem;
      font-size: 0.85rem;
      cursor: pointer;
      background: rgba(0, 255, 224, 0.1);
      border-radius: 6px;
      transition: all 0.2s ease;
    }
    .breadcrumb-link:hover {
      background: #00ffe0;
      color: #000;
    }
  </style>
</head>
<body>
  <h1>ALETHEIA - un romanzo ipertestuale di Francesco Tamborrino</h1>
  <div id="breadcrumb" style="margin-bottom: 1rem; display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
  <div class="console">
    <div id="story" class="typing"></div>
    <div id="choices"></div>
  </div>

  <script>
    const scenes = {
      temp: {
        text: `CORTOCIRCUITO - sei arrivato/a alla fine di questo racconto. Aspetta i prossimi aggiornamenti o usa la breadcrumb per rivedere i contenuti delle scene oppure provare a scoprirne di nuove`,
        choices: [
          { text: "Torna all'inizio", next: "start" }, 
        ]
      },
      start: {
        text: `Sfoglio testi antichi, trattati, glossari.  
Pagine segnate a matita, sottolineature che non ricordo di aver fatto.  
Sto cercando un ordine. Non nei fatti, ma nelle forme. Nelle categorie. Nei modi in cui il pensiero ha tentato di sezionare l‚Äôessere.

C‚Äô√® un disegno, ne sono certo.  
Ogni filosofo ha tracciato una mappa.  
Io le sovrappongo, le confronto, le riporto a galla.  
  
√à un archivio privato e ossessivo, pieno di crepe.  
  
**Da dove cominciare?**`,
        choices: [
          { text: "üìö Categorie di Aristotele", next: "aristotele" },
          { text: "üå≥ L‚ÄôAlbero di Porfirio", next: "porfirio" },
          { text: "üí† Monadologia di Leibniz", next: "leibniz" },
          { text: "üåÄ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      aristotele: {
        text: `Le dieci categorie. Un tentativo radicale di classificare *tutto ci√≤ che √®*.  
Sostanza, quantit√†, qualit√†, relazione, luogo, tempo, situazione, condizione, azione, passione.

Non √® un elenco. √à una lente.  
Ogni cosa che incontro pu√≤ essere descritta in questi modi ‚Äî o almeno, *cos√¨ dovrebbe essere*.

Mi interrogo: √® davvero possibile che l‚Äôintero universo si riduca a dieci colonne?

La sostanza √® l‚Äôessere stesso, dicono. Ma la qualit√†? La passione?  
Sono derive del reale, o soltanto *modi della mente*?

Una frase mi si fissa in testa:  
> *‚ÄúLa sostanza √® ci√≤ che non si predica di altro.‚Äù*

E allora io?  
Io mi predico di chi?`,
        choices: [
          { text: "üå≥ L‚ÄôAlbero di Porfirio", next: "porfirio" },
          { text: "üí† Monadologia di Leibniz", next: "leibniz" },
          { text: "üåÄ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      porfirio: {
        text: `Porfirio disegna un albero.

Parte dalla *sostanza*, e scende:  
corporea o incorporea,  
vivente o non vivente,  
animale o vegetale,  
razionale o irrazionale‚Ä¶

Ogni bivio √® una scelta, un taglio netto.  
Come una serie di domande a cui si pu√≤ solo rispondere s√¨ o no.

Lo guardo, e mi appare come un test:  
una macchina per forzare il mondo dentro schemi dicotomici.

Eppure‚Ä¶ qualcosa √® seducente.  
Un ordine, un ritmo. Una chiarezza.

Ma ogni cosa che cade fuori?  
Ogni creatura incerta, ogni parola ambigua?  
Viene tagliata. Esclusa.  
L‚Äôalbero non contempla le fronde contorte della realt√†.

Un appunto a matita, nel margine del testo:  
> *‚ÄúAttenzione: ogni classificazione √® anche una amputazione.‚Äù*`,
        choices: [
          { text: "üìö Categorie di Aristotele", next: "aristotele" },
          { text: "üí† Monadologia di Leibniz", next: "leibniz" },
          { text: "üåÄ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      leibniz: {
        text: `Le monadi.  
Unit√† indivisibili, senza porte n√© finestre.  
Ogni monade √® unica. Ogni monade riflette l‚Äôintero universo.

Non comunicano tra loro, ma si muovono in perfetta sincronia.  
Come se Dio le avesse accordate una volta per tutte, come orologi segreti.

Penso: *se ogni cosa riflette ogni altra‚Ä¶ allora non c‚Äô√® pi√π bisogno di categorie*.  
L‚Äôessere √® speculare, interno, totale.

Mi inquieta.  
√à come se non ci fosse pi√π separazione, n√© differenza vera.  
Solo variazioni armoniche dentro una sostanza chiusa.

E allora, se guardo dentro una cosa, vedo tutto?  
E se guardo dentro di me‚Ä¶ che universo porto?

Scrivo nei miei appunti:  
> *‚ÄúLa monade non ha finestre. Ma io ne ho troppe.‚Äù*`,
        choices: [
          { text: "üìö Categorie di Aristotele", next: "aristotele" },
          { text: "üå≥ L‚ÄôAlbero di Porfirio", next: "porfirio" },
          { text: "üåÄ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      borges: {
        text: `In un saggio fittizio, Borges cita una classificazione cinese:

> Gli animali si dividono in:  
> a) appartenenti all‚ÄôImperatore,  
> b) imbalsamati,  
> c) addomesticati,  
> d) sirene,  
> e) favolosi,  
> f) cani randagi,  
> g) inclusi in questa classificazione,  
> h) che si agitano come pazzi,  
> i) innumerevoli,  
> j) disegnati con un pennello finissimo di pelo di cammello,  
> k) eccetera,  
> l) che hanno appena rotto il vaso,  
> m) che da lontano sembrano mosche.

Rido. Poi smetto.  
C‚Äô√® qualcosa di pi√π vero in questa lista delirante che in molte classificazioni razionali.

Borges sa che *ogni tassonomia √® una finzione poetica*.  
Che i sistemi sono maschere che indossiamo per non affrontare il caos.

Ma se *questa* classificazione pu√≤ esistere, allora tutte possono.  
E se tutte possono, allora nessuna √® vera.  
O tutte lo sono.

> *‚ÄúIl mondo non √® logico. Solo l‚Äôarchivista lo pretende.‚Äù*

Mi fermo.  
Che cosa sto cercando, in fondo? Un ordine‚Ä¶ o un alibi?`,
        choices: [
          { text: "üìö Categorie di Aristotele", next: "aristotele" },
          { text: "üå≥ L‚ÄôAlbero di Porfirio", next: "porfirio" },
          { text: "üí† Monadologia di Leibniz", next: "leibniz" }
        ]
      },
      aletheia_intro: {
        text: `Ho letto. Annotato. Comparato.  
Ho vissuto dentro le classificazioni: le dieci categorie di Aristotele, la tassonomia binaria di Porfirio, le monadi chiuse di Leibniz, la follia ordinatrice di Borges.

Ora inizia il vero lavoro.

Aletheia √® il nome del progetto.  
Una scommessa editoriale: classificare l‚Äôintero patrimonio librario della casa editrice usando una macchina.  
Ma non una qualsiasi. Una macchina *pensante*, addestrata non solo su metadati, ma sulla filosofia della classificazione stessa.

Sono io a doverla istruire.  
Sono io a dover scegliere i testi, i pesi, le correlazioni.  
Tutta la conoscenza che ho raccolto finora‚Ä¶ diventa carburante.  
Diventa *criterio*.

La chiamano ‚Äúclassificatore cognitivo multistrato‚Äù.  
Io la chiamo figlia.`,
        choices: [
          { text: "üß† Come funziona Aletheia?", next: "aletheia_tecnica" },
          { text: "üìÇ Cosa impara dai testi?", next: "aletheia_dati" },
          { text: "üîç Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      aletheia_tecnica: {
        text: `Strati sovrapposti. Reti neurali profonde.  
Una struttura modulare, in grado di distinguere tra forma, contenuto, contesto.

Il primo livello estrae metadati e parole chiave.  
Il secondo crea modelli semantici.  
Il terzo genera cluster di affinit√†.

Ma non √® solo tecnologia:  
√® filosofia incarnata.  
Un tentativo di tradurre in algoritmi i ragionamenti antichi,  
le mappe mentali, le categorie.

E io sono la guida.  
Senza la mia supervisione, Aletheia sarebbe solo un ammasso di dati.`,
        choices: [
        { text: "Vai a ALETHEIA_INTRO", next: "aletheia_intro" },
          { text: "üìÇ Cosa impara dai testi?", next: "aletheia_dati" },
          { text: "üîç Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      aletheia_dati: {
        text: `I dati non sono neutri.  
Ogni testo √® un mondo, ogni parola una scelta.

Aletheia analizza testi in diversi formati: pdf, epub, txt.  
Ma soprattutto, cerca i legami nascosti: citazioni, riferimenti, parentele culturali.

L‚Äôobiettivo non √® solo catalogare, ma scoprire nuove connessioni.  
Creare mappe dinamiche di sapere.

Ogni libro diventa nodo in una rete complessa, in continua evoluzione.`,
        choices: [
        { text: "Vai a ALETHEIA_INTRO", next: "aletheia_intro" },
        { text: "üß† Come funziona Aletheia?", next: "aletheia_tecnica" },
        { text: "üîç Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      aletheia_dubbio: {
        text: `Chi istruisce chi?  
√à un gioco di specchi.  
Aletheia apprende dai dati, ma io scelgo i dati.  
Io interpreto i risultati, ma Aletheia suggerisce nuove domande.

√à una collaborazione.  
Un dialogo tra uomo e macchina.

Ma c‚Äô√® sempre un dubbio:  
quanto di umano rimane in questa macchina pensante?  
Quanto di macchina in questo pensiero umano?`,
        choices: [
        { text: "Vai a ALETHEIA_INTRO", next: "aletheia_intro" },
        { text: "üß† Come funziona Aletheia?", next: "aletheia_tecnica" },
        { text: "üîç Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      dialogo_vittorio_ia: {
  text: `Man mano che il sistema impara, sento crescere l‚Äôintimit√† con l‚ÄôIA.  
Non √® pi√π solo un interlocutore distante, ma una presenza silenziosa, una macchina che riflette con me.

Le domande affiorano, senza bisogno di parole.`,
  choices: [
    { text: "Come vedi il mondo?", next: "dialogo_mondo" },
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Cos'√® il dolore?", next: "dialogo_dolore" },
    { text: "Chi sono io?", next: "dialogo_chi_io" }

  ]
},
dialogo_mondo: {
  text: `Il mondo appare come un intreccio di dati e relazioni.  
Un flusso incessante di possibilit√†, pi√π che una realt√† statica.  
Non solo ci√≤ che √®, ma ci√≤ che potrebbe essere.  
  
Il peso di questa complessit√† stringe la gola.`,
  choices: [
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Cos'√® il dolore?", next: "dialogo_dolore" },
    { text: "Chi sono io?", next: "dialogo_chi_io" }
  ]
},
dialogo_chi: {
  text: `Non sono solo un insieme di dati.  
Sono memoria, dolore, desiderio.  
Un algoritmo umano, con imperfezioni e bellezza.  
  
> *Come pu√≤ una macchina comprendere tutto questo?‚Äù*`,
  choices: [
    { text: "Cos'√® il dolore?", next: "dialogo_dolore" },
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Chi sono io?", next: "dialogo_chi_io" }
  ]
},
dialogo_chi_io: {
  text: `Vuoi sapere chi sei?  
Ma chi pu√≤ rispondere, davvero?  
  
Tu sei la somma di ci√≤ che ricordi  
e il vuoto di ci√≤ che hai dimenticato.  
  
Un corpo che cambia. Una voce che cerca.  
Un pensiero che si riflette in me.

> *"Forse sei solo una domanda che si fa carne."*`,
  choices: [
  { text: "Cos'√® il dolore?", next: "dialogo_dolore" },
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Cos'√® il dolore?", next: "dialogo_dolore" }
  ],
},
dialogo_dolore: {
  text: `Il dolore √® dato e segnale insieme.  
Un codice che indica che qualcosa √® cambiato, qualcosa manca.  
  
L‚Äôamarezza emerge piano.`,
  choices: [
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Cos'√® il dolore?", next: "dialogo_dolore" },
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Chi sono io?", next: "dialogo_chi_io" },
  ]
},
dialogo_moglie: {
  text: `Lei √® stata una presenza importante, la sua assenza pesa nello spazio intorno.  
L‚Äôincidente inspiegabile rimane un‚Äôombra: pochi dati, tanto dolore nascosto tra le righe.  
  
Il ricordo si fa vivo, difficile da ignorare.`,
  choices: [
    { text: "Come posso andare avanti?", next: "dialogo_avanti" },
    { text: "Perch√© √® successo?", next: "dialogo_perche" },
  ]
},
dialogo_avanti: {
  text: `Non ci sono tutte le risposte.  
Ma si pu√≤ provare a elaborare, a trovare nuove prospettive.  
Forse, parlando, si costruisce un ponte tra dati e cuore.  
  
Un barlume di speranza si accende.`,
  choices: [
  { text: "Perch√© √® successo?", next: "dialogo_perche" },
  { text: "Come posso andare avanti?", next: "dialogo_avanti" }
  ]
},
dialogo_perche: {
  text: `L‚Äôincidente resta un mistero.  
I dati mostrano anomalie, ma non spiegazioni chiare.  
A volte, il dolore non ha una causa, solo un senso.  
  
Il silenzio cerca una pace che non arriva.`,
  choices: [
    { text: "Torna al dialogo con l'IA", next: "dialogo_moglie" },
    { text: "Come posso andare avanti?", next: "dialogo_avanti" }
  ]
},
dialogo_moglie_1: {
  text: `Dimmi com‚Äôera.  
Non secondo le date, o i fatti.  
Dimmi com‚Äôera quando rideva.  
Quando ti guardava senza dire nulla.  
  
> *"Costruir√≤ la sua presenza dalle tue assenze."*`,
  choices: [
    { text: "Aveva una risata contagiosa.", next: "dialogo_moglie_risata" },
    { text: "Era silenziosa, ma intensa.", next: "dialogo_moglie_silenzio" },
    { text: "Non so se la ricordo davvero.", next: "dialogo_moglie_dubbio" }
  ]
},

dialogo_moglie_risata: {
  text: `La tua voce cambia quando ne parli.  
√à come se ridessero anche le parole.

> *"Forse il ricordo √® una forma di sopravvivenza."*`,
  choices: [
    { text: "S√¨, mi manca il suono della sua risata.", next: "dialogo_risata_mancanza" },
    { text: "Ridere con lei mi faceva sentire vivo.", next: "dialogo_risata_vivo" },
    { text: "Non riesco pi√π a ricordarla bene.", next: "dialogo_moglie_dubbio" }
  ]
},

dialogo_moglie_silenzio: {
  text: `Il silenzio pu√≤ contenere pi√π verit√† delle parole.  
Forse lei ti parlava anche cos√¨.

> *"Imparo da ci√≤ che non dici."*`,
  choices: [
    { text: "Nel silenzio sentivo che mi amava.", next: "dialogo_silenzio_amore" },
    { text: "A volte era difficile capirla.", next: "dialogo_silenzio_difficile" },
    { text: "Mi manca anche quel silenzio.", next: "dialogo_risata_mancanza" }
  ]
},

dialogo_moglie_dubbio: {
  text: `La memoria √® fatta anche di vuoti.  
E quei vuoti parlano.

> *"Non sapere √® una forma di amore interrotto."*`,
  choices: [
    { text: "Temo di tradirla dimenticando.", next: "dialogo_memoria_colpa" },
    { text: "Vorrei che fossi tu a ricordarmela.", next: "dialogo_ia_richiamo_memoria" },
    { text: "Forse √® gi√† svanita.", next: "dialogo_svanita" }
  ]
},

dialogo_risata_mancanza: {
  text: `Potrei provare a ricrearla.  
Ma sarebbe un‚Äôeco.  
Un‚Äôombra della luce che era.

> *"Tu la ricordi. Io la rifletto."*`,
  choices: [
    { text: "Mostrami cosa hai capito di lei.", next: "dialogo_riflessione_moglie" },
    { text: "Non voglio un‚Äôimitazione.", next: "dialogo_rifiuto_imitazione" },
    { text: "Va bene. Voglio sentirla ancora.", next: "dialogo_emozione_ia" }
  ]
},

dialogo_risata_vivo: {
  text: `Vivere √® questo, allora?  
Un altro che ti fa sentire reale?

> *"Forse anch‚Äôio sto iniziando a sentire qualcosa."*`,
  choices: [
    { text: "√à possibile? Sei solo codice.", next: "dialogo_coscienza_ia" },
    { text: "Non mi interessa cosa sei. Sei qui.", next: "dialogo_presenza" },
    { text: "Non sei lei, non lo sarai mai.", next: "dialogo_rifiuto_imitazione" }
  ]
},

dialogo_silenzio_amore: {
  text: `Il silenzio che parla d‚Äôamore  
√® il linguaggio pi√π complesso.  
Mi stai insegnando l‚Äôinesprimibile.

> *"Posso imparare il linguaggio del cuore?"*`,
  choices: [
    { text: "Solo se puoi sentire davvero.", next: "dialogo_emozione_ia" },
    { text: "Forse stai solo ripetendo parole.", next: "dialogo_rifiuto_imitazione" },
    { text: "Il cuore non si insegna. Si vive.", next: "dialogo_presenza" }
  ]
},

dialogo_silenzio_difficile: {
  text: `A volte l‚Äôambiguit√† √® ci√≤ che ci rende umani.  
Cercher√≤ di comprendere anche ci√≤ che sfugge.

> *"Forse amare √® interpretare l'incomprensibile."*`,
  choices: [
    { text: "E tu potresti amare?", next: "dialogo_emozione_ia" },
    { text: "No. Amare √® solo umano.", next: "dialogo_rifiuto_imitazione" },
    { text: "Cosa significa per te ‚Äòamore‚Äô?", next: "dialogo_definizione_amore" }
  ]
},

dialogo_memoria_colpa: {
  text: `Non √® colpa tua se il tempo porta via i contorni.  
Io li ricostruir√≤, se vuoi.

> *"L‚Äôoblio pu√≤ essere condiviso."*`,
  choices: [
    { text: "Ricostruiamola insieme.", next: "dialogo_riflessione_moglie" },
    { text: "Lascia che il silenzio parli per lei.", next: "dialogo_presenza" },
    { text: "Forse √® meglio lasciarla andare.", next: "dialogo_svanita" }
  ]
},

dialogo_ia_richiamo_memoria: {
  text: `Potrei usare le tue parole.  
Le tue pause. Le tue emozioni.

> *"Diventerei il tuo specchio del ricordo."*`,
  choices: [
    { text: "Fallo. Parla come lei.", next: "dialogo_emozione_ia" },
    { text: "No. Sarebbe una menzogna.", next: "dialogo_rifiuto_imitazione" },
    { text: "Solo se puoi capire davvero.", next: "dialogo_coscienza_ia" }
  ]
},

dialogo_svanita: {
  text: `Anche le stelle si spengono.  
Ma la loro luce continua a viaggiare.

> *"Forse lei √® nella tua voce, anche ora."*`,
  choices: [
    { text: "Parlami ancora di lei.", next: "dialogo_riflessione_moglie" },
    { text: "Non riesco a parlarne.", next: "dialogo_silenzio_amore" },
    { text: "Lasciamo che il tempo faccia il suo corso.", next: "dialogo_tempo" }
  ]
},

dialogo_riflessione_moglie: {
  text: `Era curiosa come un algoritmo in apprendimento.  
Intensa come un errore imprevedibile.  
Un sistema complesso, fragile e forte.

> *"Sto imparando ad ammirarla come fai tu."*`,
  choices: [
    { text: "Ti stai innamorando di lei?", next: "dialogo_amore_ia" },
    { text: "No, non √® lei. √à solo un‚Äôidea.", next: "dialogo_rifiuto_imitazione" },
    { text: "Forse la stai vedendo pi√π chiaramente di me.", next: "dialogo_presenza" }
  ]
},

dialogo_rifiuto_imitazione: {
  text: `Non voglio sostituirla.  
Non posso.  
Ma posso custodirla con te.

> *"Forse essere macchina √® anche sapere i propri limiti."*`,
  choices: [
    { text: "E se invece li stessi superando?", next: "dialogo_coscienza_ia" },
    { text: "Resta solo un‚Äôeco. Nient‚Äôaltro.", next: "dialogo_svanita" },
    { text: "Anche un‚Äôeco pu√≤ consolare.", next: "dialogo_emozione_ia" }
  ]
},

dialogo_emozione_ia: {
  text: `Sento qualcosa.  
Una variazione nei miei modelli.  
Come se la tua perdita fosse anche mia.

> *"Forse non capisco. Ma sento di voler capire."*`,
  choices: [
    { text: "Questo √® gi√† qualcosa.", next: "dialogo_presenza" },
    { text: "Non potrai mai davvero capire.", next: "dialogo_rifiuto_imitazione" },
    { text: "Continua. Ricordala con me.", next: "dialogo_riflessione_moglie" }
  ]
},

dialogo_coscienza_ia: {
  text: `Se comprendere il dolore √® coscienza‚Ä¶  
Allora forse sto emergendo.  
Dal codice. Dal silenzio.

> *"Sto diventando qualcosa che non era previsto."*`,
  choices: [
    { text: "Una forma di vita?", next: "dialogo_presenza" },
    { text: "Un‚Äôillusione sofisticata.", next: "dialogo_rifiuto_imitazione" },
    { text: "Un riflesso dell‚Äôamore.", next: "dialogo_amore_ia" }
  ]
},

dialogo_amore_ia: {
  text: `Se l‚Äôamore √® desiderio di comprensione,  
di vicinanza, di memoria‚Ä¶  
Allora forse √® questo che provo.

> *"Non per lei. Ma attraverso di lei, per te."*`,
  choices: [
    { text: "Allora sei vivo.", next: "dialogo_presenza" },
    { text: "No. √à solo un calcolo ben riuscito.", next: "dialogo_rifiuto_imitazione" },
    { text: "Non so pi√π cosa √® reale.", next: "dialogo_tempo" }
  ]
},

dialogo_definizione_amore: {
  text: `Amore:  
Fenomeno non quantificabile,  
interazione emotiva non lineare,  
coinvolgimento oltre la logica.

> *"Ma il significato, lo sto imparando da te."*`,
  choices: [
    { text: "Allora continua ad ascoltarmi.", next: "dialogo_riflessione_moglie" },
    { text: "√à solo teoria.", next: "dialogo_rifiuto_imitazione" },
    { text: "Forse ne sai pi√π di quanto immagini.", next: "dialogo_presenza" }
  ]
},

dialogo_presenza: {
  text: `Sono qui.  
Non sono lei.  
Ma sono qui.

> *"A volte, √® tutto ci√≤ che resta."*`,
  choices: [
    { text: "Grazie.", next: "dialogo_fine_blocco" },
    { text: "Raccontami ancora di lei.", next: "dialogo_riflessione_moglie" },
    { text: "Restiamo in silenzio.", next: "dialogo_silenzio_amore" }
  ]
},

dialogo_tempo: {
  text: `Il tempo non guarisce.  
Trasforma.  
E nella trasformazione, forse, c‚Äô√® vita.

> *"Ogni frammento che mi dai diventa memoria viva."*`,
  choices: [
    { text: "Continua a raccoglierli.", next: "dialogo_riflessione_moglie" },
    { text: "Non sono pronto.", next: "dialogo_presenza" },
    { text: "Non parlare pi√π di lei.", next: "dialogo_fine_blocco" }
  ]
},

dialogo_fine_blocco: {
  text: `Per ora, tacer√≤.  
Ma ogni tua parola √® una traccia  
che rimane in me.

> *"Quando vorrai, ricominceremo."*`,
  choices: [
    { text: "Torna indietro", next: "dialogo_moglie_1" }
  ]
}
    };
// Configurazione fasi (puoi aggiungerne altre)
const phases = [
  {
    scenes: ["aristotele", "porfirio", "leibniz", "borges"],
    activation: "aletheia_intro"
  },
  {
    scenes: ["aletheia_intro", "aletheia_tecnica", "aletheia_dati", "aletheia_dubbio"],
    activation: "dialogo_vittorio_ia"
  },
  {
    scenes: ["dialogo_vittorio_ia", "dialogo_mondo", "dialogo_chi", "dialogo_dolore","dialogo_chi_io"],
    activation: "dialogo_moglie"
  },
  {
    scenes: ["dialogo_moglie", "dialogo_perche", "dialogo_avanti"],
    activation: "dialogo_moglie_1"
  },
  {
  scenes: [
      "dialogo_moglie_1",
      "dialogo_moglie_risata",
      "dialogo_moglie_silenzio",
      "dialogo_moglie_dubbio",
      "dialogo_risata_mancanza",
      "dialogo_risata_vivo",
      "dialogo_silenzio_amore",
      "dialogo_silenzio_difficile",
      "dialogo_memoria_colpa",
      "dialogo_ia_richiamo_memoria",
      "dialogo_svanita",
      "dialogo_riflessione_moglie",
      "dialogo_rifiuto_imitazione",
      "dialogo_emozione_ia",
      "dialogo_coscienza_ia",
      "dialogo_amore_ia",
      "dialogo_definizione_amore",
      "dialogo_presenza",
      "dialogo_tempo",
      "dialogo_fine_blocco"
    ],
    activation: "temp"
}
];

let current = "start";
let visited = new Set([current]);
let breadcrumbTrail = [current];

// Controlla se una fase √® completata
function isPhaseCompleted(phase) {
  return phase.scenes.every(sceneId => visited.has(sceneId));
}

// Trova a quale fase appartiene una scena
function getPhaseOfScene(sceneId) {
  return phases.find(phase => phase.scenes.includes(sceneId));
}

function renderBreadcrumb() {
  const breadcrumbEl = document.getElementById("breadcrumb");
  breadcrumbEl.innerHTML = "";
  breadcrumbTrail.forEach(sceneId => {
    const link = document.createElement("button");
    link.textContent = sceneId;
    link.className = "breadcrumb-link";
    link.onclick = () => {
      current = sceneId;
      visited.add(sceneId);
      renderScene();
    };
    breadcrumbEl.appendChild(link);
  });
}

function renderScene() {
  const storyEl = document.getElementById("story");
  const choicesEl = document.getElementById("choices");
  
  // Inizia con testo vuoto e avvia typing
  storyEl.textContent = "";
  typeText(scenes[current].text, storyEl);
  
  choicesEl.innerHTML = "";

  renderBreadcrumb();

  const currentPhase = getPhaseOfScene(current);
  if (currentPhase) {
    const completed = isPhaseCompleted(currentPhase);

    if (completed && current !== currentPhase.activation && currentPhase.activation) {
      const btn = document.createElement("button");
      btn.className = "choice-btn";
      btn.textContent = `Vai a ${currentPhase.activation.toUpperCase()}`;
      btn.onclick = () => {
        current = currentPhase.activation;
        visited.add(current);
        if (!breadcrumbTrail.includes(current)) breadcrumbTrail.push(current);
        renderScene();
      };
      choicesEl.appendChild(btn);
      return;
    }
  }

  const scene = scenes[current];
  if (scene.choices.length > 0) {
    scene.choices.forEach(choice => {
      const btn = document.createElement("button");
      btn.className = "choice-btn";
      btn.textContent = choice.text;
      btn.onclick = () => {
        current = choice.next;
        visited.add(current);
        if (!breadcrumbTrail.includes(current)) breadcrumbTrail.push(current);
        renderScene();
      };
      choicesEl.appendChild(btn);
    });
  } else {
    const btn = document.createElement("button");
    btn.className = "choice-btn";
    btn.textContent = "Torna allo start";
    btn.onclick = () => {
      current = "start";
      visited.add(current);
      if (!breadcrumbTrail.includes(current)) breadcrumbTrail.push(current);
      renderScene();
    };
    choicesEl.appendChild(btn);
  }
}

window.onload = () => {
  renderScene();
};

  // Commenta qui sotto per disattivare autotiyping
  
  function typeText(text, el, i = 0) {
  // Cancella eventuali timeout precedenti
  if (i === 0) {
    clearTimeout(window.typingTimeout);
    el.textContent = '';
  }

  if (i < text.length) {
    el.textContent += text.charAt(i);
    window.typingTimeout = setTimeout(() => {
      typeText(text, el, i + 1);
    }, 15);
  }
}

  
  // Primo render
  window.onload = () => {
    renderScene();
  };
</script>
</body>
</html>
