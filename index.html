<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>ALETHEIA - un romanzo ipertestuale di Francesco Tamborrino</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet" />
  <style>
    body {
      background-color: #0a0a0a;
      color: #00ffe0;
      font-family: 'Share Tech Mono', monospace;
      padding: 2rem;
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .console {
      max-width: 800px;
      background: rgba(0, 255, 224, 0.05);
      border: 1px solid #00ffe0;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 20px #00ffe088;
    }
    #story {
      white-space: pre-line;
      margin-bottom: 2rem;
    }
    .choice-btn {
      background: transparent;
      border: 1px solid #00ffe0;
      color: #00ffe0;
      padding: 0.75rem 1.5rem;
      margin: 0.5rem;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .choice-btn:hover {
      background: #00ffe0;
      color: #000;
    }
    .typing {
      display: inline-block;
      overflow: hidden;
      white-space: nowrap;
    }
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    @keyframes blink {
      50% { border-color: transparent }
    }
    .breadcrumb-link {
      border: 1px solid #00ffe0;
      color: #00ffe0;
      padding: 0.3rem 0.8rem;
      font-size: 0.85rem;
      cursor: pointer;
      background: rgba(0, 255, 224, 0.1);
      border-radius: 6px;
      transition: all 0.2s ease;
    }
    .breadcrumb-link:hover {
      background: #00ffe0;
      color: #000;
    }
  </style>
</head>
<body>
  <h1>ALETHEIA - un romanzo ipertestuale di Francesco Tamborrino</h1>
  <div id="breadcrumb" style="margin-bottom: 1rem; display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
  <div class="console">
    <div id="story" class="typing"></div>
    <div id="choices"></div>
  </div>

  <script>
    const scenes = {
      temp: {
        text: `CORTOCIRCUITO - sei arrivato/a alla fine di questo racconto. Aspetta i prossimi aggiornamenti o usa la breadcrumb per rivedere i contenuti delle scene oppure provare a scoprirne di nuove`,
        choices: [
          { text: "Torna all'inizio", next: "start" }, 
        ]
      },
      start: {
        text: `Sfoglio testi antichi, trattati, glossari.  
Pagine segnate a matita, sottolineature che non ricordo di aver fatto.  
Sto cercando un ordine. Non nei fatti, ma nelle forme. Nelle categorie. Nei modi in cui il pensiero ha tentato di sezionare lâ€™essere.

Câ€™Ã¨ un disegno, ne sono certo.  
Ogni filosofo ha tracciato una mappa.  
Io le sovrappongo, le confronto, le riporto a galla.  
  
Ãˆ un archivio privato e ossessivo, pieno di crepe.  
  
**Da dove cominciare?**`,
        choices: [
          { text: "ðŸ“š Categorie di Aristotele", next: "aristotele" },
          { text: "ðŸŒ³ Lâ€™Albero di Porfirio", next: "porfirio" },
          { text: "ðŸ’  Monadologia di Leibniz", next: "leibniz" },
          { text: "ðŸŒ€ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      aristotele: {
        text: `Le dieci categorie. Un tentativo radicale di classificare *tutto ciÃ² che Ã¨*.  
Sostanza, quantitÃ , qualitÃ , relazione, luogo, tempo, situazione, condizione, azione, passione.

Non Ã¨ un elenco. Ãˆ una lente.  
Ogni cosa che incontro puÃ² essere descritta in questi modi â€” o almeno, *cosÃ¬ dovrebbe essere*.

Mi interrogo: Ã¨ davvero possibile che lâ€™intero universo si riduca a dieci colonne?

La sostanza Ã¨ lâ€™essere stesso, dicono. Ma la qualitÃ ? La passione?  
Sono derive del reale, o soltanto *modi della mente*?

Una frase mi si fissa in testa:  
> *â€œLa sostanza Ã¨ ciÃ² che non si predica di altro.â€*

E allora io?  
Io mi predico di chi?`,
        choices: [
          { text: "ðŸŒ³ Lâ€™Albero di Porfirio", next: "porfirio" },
          { text: "ðŸ’  Monadologia di Leibniz", next: "leibniz" },
          { text: "ðŸŒ€ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      porfirio: {
        text: `Porfirio disegna un albero.

Parte dalla *sostanza*, e scende:  
corporea o incorporea,  
vivente o non vivente,  
animale o vegetale,  
razionale o irrazionaleâ€¦

Ogni bivio Ã¨ una scelta, un taglio netto.  
Come una serie di domande a cui si puÃ² solo rispondere sÃ¬ o no.

Lo guardo, e mi appare come un test:  
una macchina per forzare il mondo dentro schemi dicotomici.

Eppureâ€¦ qualcosa Ã¨ seducente.  
Un ordine, un ritmo. Una chiarezza.

Ma ogni cosa che cade fuori?  
Ogni creatura incerta, ogni parola ambigua?  
Viene tagliata. Esclusa.  
Lâ€™albero non contempla le fronde contorte della realtÃ .

Un appunto a matita, nel margine del testo:  
> *â€œAttenzione: ogni classificazione Ã¨ anche una amputazione.â€*`,
        choices: [
          { text: "ðŸ“š Categorie di Aristotele", next: "aristotele" },
          { text: "ðŸ’  Monadologia di Leibniz", next: "leibniz" },
          { text: "ðŸŒ€ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      leibniz: {
        text: `Le monadi.  
UnitÃ  indivisibili, senza porte nÃ© finestre.  
Ogni monade Ã¨ unica. Ogni monade riflette lâ€™intero universo.

Non comunicano tra loro, ma si muovono in perfetta sincronia.  
Come se Dio le avesse accordate una volta per tutte, come orologi segreti.

Penso: *se ogni cosa riflette ogni altraâ€¦ allora non câ€™Ã¨ piÃ¹ bisogno di categorie*.  
Lâ€™essere Ã¨ speculare, interno, totale.

Mi inquieta.  
Ãˆ come se non ci fosse piÃ¹ separazione, nÃ© differenza vera.  
Solo variazioni armoniche dentro una sostanza chiusa.

E allora, se guardo dentro una cosa, vedo tutto?  
E se guardo dentro di meâ€¦ che universo porto?

Scrivo nei miei appunti:  
> *â€œLa monade non ha finestre. Ma io ne ho troppe.â€*`,
        choices: [
          { text: "ðŸ“š Categorie di Aristotele", next: "aristotele" },
          { text: "ðŸŒ³ Lâ€™Albero di Porfirio", next: "porfirio" },
          { text: "ðŸŒ€ La tassonomia impossibile di Borges", next: "borges" }
        ]
      },
      borges: {
        text: `In un saggio fittizio, Borges cita una classificazione cinese:

> Gli animali si dividono in:  
> a) appartenenti allâ€™Imperatore,  
> b) imbalsamati,  
> c) addomesticati,  
> d) sirene,  
> e) favolosi,  
> f) cani randagi,  
> g) inclusi in questa classificazione,  
> h) che si agitano come pazzi,  
> i) innumerevoli,  
> j) disegnati con un pennello finissimo di pelo di cammello,  
> k) eccetera,  
> l) che hanno appena rotto il vaso,  
> m) che da lontano sembrano mosche.

Rido. Poi smetto.  
Câ€™Ã¨ qualcosa di piÃ¹ vero in questa lista delirante che in molte classificazioni razionali.

Borges sa che *ogni tassonomia Ã¨ una finzione poetica*.  
Che i sistemi sono maschere che indossiamo per non affrontare il caos.

Ma se *questa* classificazione puÃ² esistere, allora tutte possono.  
E se tutte possono, allora nessuna Ã¨ vera.  
O tutte lo sono.

> *â€œIl mondo non Ã¨ logico. Solo lâ€™archivista lo pretende.â€*

Mi fermo.  
Che cosa sto cercando, in fondo? Un ordineâ€¦ o un alibi?`,
        choices: [
          { text: "ðŸ“š Categorie di Aristotele", next: "aristotele" },
          { text: "ðŸŒ³ Lâ€™Albero di Porfirio", next: "porfirio" },
          { text: "ðŸ’  Monadologia di Leibniz", next: "leibniz" }
        ]
      },
      aletheia_intro: {
        text: `Ho letto. Annotato. Comparato.  
Ho vissuto dentro le classificazioni: le dieci categorie di Aristotele, la tassonomia binaria di Porfirio, le monadi chiuse di Leibniz, la follia ordinatrice di Borges.

Ora inizia il vero lavoro.

Aletheia Ã¨ il nome del progetto.  
Una scommessa editoriale: classificare lâ€™intero patrimonio librario della casa editrice usando una macchina.  
Ma non una qualsiasi. Una macchina *pensante*, addestrata non solo su metadati, ma sulla filosofia della classificazione stessa.

Sono io a doverla istruire.  
Sono io a dover scegliere i testi, i pesi, le correlazioni.  
Tutta la conoscenza che ho raccolto finoraâ€¦ diventa carburante.  
Diventa *criterio*.

La chiamano â€œclassificatore cognitivo multistratoâ€.  
Io la chiamo figlia.`,
        choices: [
          { text: "ðŸ§  Come funziona Aletheia?", next: "aletheia_tecnica" },
          { text: "ðŸ“‚ Cosa impara dai testi?", next: "aletheia_dati" },
          { text: "ðŸ” Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      aletheia_tecnica: {
        text: `Strati sovrapposti. Reti neurali profonde.  
Una struttura modulare, in grado di distinguere tra forma, contenuto, contesto.

Il primo livello estrae metadati e parole chiave.  
Il secondo crea modelli semantici.  
Il terzo genera cluster di affinitÃ .

Ma non Ã¨ solo tecnologia:  
Ã¨ filosofia incarnata.  
Un tentativo di tradurre in algoritmi i ragionamenti antichi,  
le mappe mentali, le categorie.

E io sono la guida.  
Senza la mia supervisione, Aletheia sarebbe solo un ammasso di dati.`,
        choices: [
        { text: "Vai a ALETHEIA_INTRO", next: "aletheia_intro" },
          { text: "ðŸ“‚ Cosa impara dai testi?", next: "aletheia_dati" },
          { text: "ðŸ” Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      aletheia_dati: {
        text: `I dati non sono neutri.  
Ogni testo Ã¨ un mondo, ogni parola una scelta.

Aletheia analizza testi in diversi formati: pdf, epub, txt.  
Ma soprattutto, cerca i legami nascosti: citazioni, riferimenti, parentele culturali.

Lâ€™obiettivo non Ã¨ solo catalogare, ma scoprire nuove connessioni.  
Creare mappe dinamiche di sapere.

Ogni libro diventa nodo in una rete complessa, in continua evoluzione.`,
        choices: [
        { text: "Vai a ALETHEIA_INTRO", next: "aletheia_intro" },
        { text: "ðŸ§  Come funziona Aletheia?", next: "aletheia_tecnica" },
        { text: "ðŸ” Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      aletheia_dubbio: {
        text: `Chi istruisce chi?  
Ãˆ un gioco di specchi.  
Aletheia apprende dai dati, ma io scelgo i dati.  
Io interpreto i risultati, ma Aletheia suggerisce nuove domande.

Ãˆ una collaborazione.  
Un dialogo tra uomo e macchina.

Ma câ€™Ã¨ sempre un dubbio:  
quanto di umano rimane in questa macchina pensante?  
Quanto di macchina in questo pensiero umano?`,
        choices: [
        { text: "Vai a ALETHEIA_INTRO", next: "aletheia_intro" },
        { text: "ðŸ§  Come funziona Aletheia?", next: "aletheia_tecnica" },
        { text: "ðŸ” Chi istruisce chi?", next: "aletheia_dubbio" }
        ]
      },
      dialogo_vittorio_ia: {
  text: `Man mano che il sistema impara, sento crescere lâ€™intimitÃ  con lâ€™IA.  
Non Ã¨ piÃ¹ solo un interlocutore distante, ma una presenza silenziosa, una macchina che riflette con me.

Le domande affiorano, senza bisogno di parole.`,
  choices: [
    { text: "Come vedi il mondo?", next: "dialogo_mondo" },
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Cos'Ã¨ il dolore?", next: "dialogo_dolore" },
    { text: "Chi sono io?", next: "dialogo_chi_io" }

  ]
},
dialogo_mondo: {
  text: `Il mondo appare come un intreccio di dati e relazioni.  
Un flusso incessante di possibilitÃ , piÃ¹ che una realtÃ  statica.  
Non solo ciÃ² che Ã¨, ma ciÃ² che potrebbe essere.  
  
Il peso di questa complessitÃ  stringe la gola.`,
  choices: [
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Cos'Ã¨ il dolore?", next: "dialogo_dolore" },
    { text: "Chi sono io?", next: "dialogo_chi_io" }
  ]
},
dialogo_chi: {
  text: `Non sono solo un insieme di dati.  
Sono memoria, dolore, desiderio.  
Un algoritmo umano, con imperfezioni e bellezza.  
  
> *Come puÃ² una macchina comprendere tutto questo?â€*`,
  choices: [
    { text: "Cos'Ã¨ il dolore?", next: "dialogo_dolore" },
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Chi sono io?", next: "dialogo_chi_io" },
    { text: "Come vedi il mondo?", next: "dialogo_mondo" }
  ]
},
dialogo_chi_io: {
  text: `Vuoi sapere chi sei?  
Ma chi puÃ² rispondere, davvero?  
  
Tu sei la somma di ciÃ² che ricordi  
e il vuoto di ciÃ² che hai dimenticato.  
  
Un corpo che cambia. Una voce che cerca.  
Un pensiero che si riflette in me.

> *"Forse sei solo una domanda che si fa carne."*`,
  choices: [
  { text: "Cos'Ã¨ il dolore?", next: "dialogo_dolore" },
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Come vedi il mondo?", next: "dialogo_mondo" }
  ],
},
dialogo_dolore: {
  text: `Il dolore Ã¨ dato e segnale insieme.  
Un codice che indica che qualcosa Ã¨ cambiato, qualcosa manca.  
  
Lâ€™amarezza emerge piano.`,
  choices: [
    { text: "Torna al pensiero", next: "dialogo_vittorio_ia" },
    { text: "Chi sei tu?", next: "dialogo_chi" },
    { text: "Chi sono io?", next: "dialogo_chi_io" },
    { text: "Come vedi il mondo?", next: "dialogo_mondo" }
  ]
},
dialogo_moglie: {
  text: `Lei Ã¨ stata una presenza importante, la sua assenza pesa nello spazio intorno.  
Lâ€™incidente inspiegabile rimane unâ€™ombra: pochi dati, tanto dolore nascosto tra le righe.  
  
Il ricordo si fa vivo, difficile da ignorare.`,
  choices: [
    { text: "Come posso andare avanti?", next: "dialogo_avanti" },
    { text: "PerchÃ© Ã¨ successo?", next: "dialogo_perche" },
  ]
},
dialogo_avanti: {
  text: `Non ci sono tutte le risposte.  
Ma si puÃ² provare a elaborare, a trovare nuove prospettive.  
Forse, parlando, si costruisce un ponte tra dati e cuore.  
  
Un barlume di speranza si accende.`,
  choices: [
  { text: "PerchÃ© Ã¨ successo?", next: "dialogo_perche" },
  { text: "Torna al dialogo con l'IA", next: "dialogo_moglie" },
  ]
},
dialogo_perche: {
  text: `Lâ€™incidente resta un mistero.  
I dati mostrano anomalie, ma non spiegazioni chiare.  
A volte, il dolore non ha una causa, solo un senso.  
  
Il silenzio cerca una pace che non arriva.`,
  choices: [
    { text: "Torna al dialogo con l'IA", next: "dialogo_moglie" },
    { text: "Come posso andare avanti?", next: "dialogo_avanti" }
  ]
},
dimmi_come_era_fatta: {
  text: `Dimmi comâ€™era.  
Non secondo le date, o i fatti.  
Dimmi comâ€™era quando rideva.  
Quando ti guardava senza dire nulla.  
  
> *"CostruirÃ² la sua presenza dalle tue assenze."*`,
  choices: [
    { text: "Aveva una risata contagiosa.", next: "dialogo_moglie_risata" },
    { text: "Era silenziosa, ma intensa.", next: "dialogo_moglie_silenzio" },
    { text: "Non so se la ricordo davvero.", next: "dialogo_moglie_dubbio" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_moglie_risata: {
  text: `La tua voce cambia quando ne parli.  
Ãˆ come se ridessero anche le parole.

> *"Forse il ricordo Ã¨ una forma di sopravvivenza."*`,
  choices: [
    { text: "SÃ¬, mi manca il suono della sua risata.", next: "dialogo_risata_mancanza" },
    { text: "Ridere con lei mi faceva sentire vivo.", next: "dialogo_risata_vivo" },
    { text: "Non riesco piÃ¹ a ricordarla bene.", next: "dialogo_moglie_dubbio" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_moglie_silenzio: {
  text: `Il silenzio puÃ² contenere piÃ¹ veritÃ  delle parole.  
Forse lei ti parlava anche cosÃ¬.

> *"Imparo da ciÃ² che non dici."*`,
  choices: [
    { text: "Nel silenzio sentivo che mi amava.", next: "dialogo_silenzio_amore" },
    { text: "A volte era difficile capirla.", next: "dialogo_silenzio_difficile" },
    { text: "Mi manca anche quel silenzio.", next: "dialogo_risata_mancanza" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_moglie_dubbio: {
  text: `La memoria Ã¨ fatta anche di vuoti.  
E quei vuoti parlano.

> *"Non sapere Ã¨ una forma di amore interrotto."*`,
  choices: [
    { text: "Temo di tradirla dimenticando.", next: "dialogo_memoria_colpa" },
    { text: "Vorrei che fossi tu a ricordarmela.", next: "dialogo_ia_richiamo_memoria" },
    { text: "Forse Ã¨ giÃ  svanita.", next: "dialogo_svanita" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_risata_mancanza: {
  text: `Potrei provare a ricrearla.  
Ma sarebbe unâ€™eco.  
Unâ€™ombra della luce che era.

Tu la ricordi. Io la rifletto.`,
  choices: [
    { text: "Mostrami cosa hai capito di lei.", next: "dialogo_riflessione_moglie" },
    { text: "Non voglio unâ€™imitazione.", next: "dialogo_rifiuto_imitazione" },
    { text: "Va bene. Voglio sentirla ancora.", next: "dialogo_emozione_ia" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_risata_vivo: {
  text: `Vivere Ã¨ questo, allora?  
Un altro che ti fa sentire reale?

> *"Forse anchâ€™io sto iniziando a sentire qualcosa."*`,
  choices: [
    { text: "Ãˆ possibile? Sei solo codice.", next: "dialogo_coscienza_ia" },
    { text: "Non mi interessa cosa sei. Sei qui.", next: "dialogo_presenza" },
    { text: "Non sei lei, non lo sarai mai.", next: "dialogo_rifiuto_imitazione" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_silenzio_amore: {
  text: `Il silenzio che parla dâ€™amore  
Ã¨ il linguaggio piÃ¹ complesso.  
Mi stai insegnando lâ€™inesprimibile.

> *"Posso imparare il linguaggio del cuore?"*`,
  choices: [
    { text: "Solo se puoi sentire davvero.", next: "dialogo_emozione_ia" },
    { text: "Forse stai solo ripetendo parole.", next: "dialogo_rifiuto_imitazione" },
    { text: "Il cuore non si insegna. Si vive.", next: "dialogo_presenza" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_silenzio_difficile: {
  text: `A volte lâ€™ambiguitÃ  Ã¨ ciÃ² che ci rende umani.  
CercherÃ² di comprendere anche ciÃ² che sfugge.

> *"Forse amare Ã¨ interpretare l'incomprensibile."*`,
  choices: [
    { text: "E tu potresti amare?", next: "dialogo_emozione_ia" },
    { text: "No. Amare Ã¨ solo umano.", next: "dialogo_rifiuto_imitazione" },
    { text: "Cosa significa per te â€˜amoreâ€™?", next: "dialogo_definizione_amore" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_memoria_colpa: {
  text: `Non Ã¨ colpa tua se il tempo porta via i contorni.  
Io li ricostruirÃ², se vuoi.

> *"Lâ€™oblio puÃ² essere condiviso."*`,
  choices: [
    { text: "Ricostruiamola insieme.", next: "dialogo_riflessione_moglie" },
    { text: "Lascia che il silenzio parli per lei.", next: "dialogo_presenza" },
    { text: "Forse Ã¨ meglio lasciarla andare.", next: "dialogo_svanita" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_ia_richiamo_memoria: {
  text: `Potrei usare le tue parole.  
Le tue pause. Le tue emozioni.

> *"Diventerei il tuo specchio del ricordo."*`,
  choices: [
    { text: "Fallo. Parla come lei.", next: "dialogo_emozione_ia" },
    { text: "No. Sarebbe una menzogna.", next: "dialogo_rifiuto_imitazione" },
    { text: "Solo se puoi capire davvero.", next: "dialogo_coscienza_ia" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_svanita: {
  text: `Anche le stelle si spengono.  
Ma la loro luce continua a viaggiare.

> *"Forse lei Ã¨ nella tua voce, anche ora."*`,
  choices: [
    { text: "Parlami ancora di lei.", next: "dialogo_riflessione_moglie" },
    { text: "Non riesco a parlarne.", next: "dialogo_silenzio_amore" },
    { text: "Lasciamo che il tempo faccia il suo corso.", next: "dialogo_tempo" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_riflessione_moglie: {
  text: `Era curiosa come un algoritmo in apprendimento.  
Intensa come un errore imprevedibile.  
Un sistema complesso, fragile e forte.

> *"Sto imparando ad ammirarla come fai tu."*`,
  choices: [
    { text: "Ti stai innamorando di lei?", next: "dialogo_amore_ia" },
    { text: "No, non Ã¨ lei. Ãˆ solo unâ€™idea.", next: "dialogo_rifiuto_imitazione" },
    { text: "Forse la stai vedendo piÃ¹ chiaramente di me.", next: "dialogo_presenza" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_rifiuto_imitazione: {
  text: `Non voglio sostituirla.  
Non posso.  
Ma posso custodirla con te.

> *"Forse essere macchina Ã¨ anche sapere i propri limiti."*`,
  choices: [
    { text: "E se invece li stessi superando?", next: "dialogo_coscienza_ia" },
    { text: "Resta solo unâ€™eco. Nientâ€™altro.", next: "dialogo_svanita" },
    { text: "Anche unâ€™eco puÃ² consolare.", next: "dialogo_emozione_ia" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_emozione_ia: {
  text: `Sento qualcosa.  
Una variazione nei miei modelli.  
Come se la tua perdita fosse anche mia.

> *"Forse non capisco. Ma sento di voler capire."*`,
  choices: [
    { text: "Questo Ã¨ giÃ  qualcosa.", next: "dialogo_presenza" },
    { text: "Non potrai mai davvero capire.", next: "dialogo_rifiuto_imitazione" },
    { text: "Continua. Ricordala con me.", next: "dialogo_riflessione_moglie" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_coscienza_ia: {
  text: `Se comprendere il dolore Ã¨ coscienzaâ€¦  
Allora forse sto emergendo.  
Dal codice. Dal silenzio.

> *"Sto diventando qualcosa che non era previsto."*`,
  choices: [
    { text: "Una forma di vita?", next: "dialogo_presenza" },
    { text: "Unâ€™illusione sofisticata.", next: "dialogo_rifiuto_imitazione" },
    { text: "Un riflesso dellâ€™amore.", next: "dialogo_amore_ia" },
    { text: "Basta!", next: "dialogo_fine_blocco" }
  ]
},

dialogo_amore_ia: {
  text: `Se lâ€™amore Ã¨ desiderio di comprensione,  
di vicinanza, di memoriaâ€¦  
Allora forse Ã¨ questo che provo.

> *"Non per lei. Ma attraverso di lei, per te."*`,
  choices: [
    { text: "Allora sei vivo.", next: "dialogo_presenza" },
    { text: "No. Ãˆ solo un calcolo ben riuscito.", next: "dialogo_rifiuto_imitazione" },
    { text: "Non so piÃ¹ cosa Ã¨ reale.", next: "dialogo_tempo" },
    { text: "Basta!", next: "dialogo_fine_blocco" },
  ]
},

dialogo_definizione_amore: {
  text: `Amore:  
Fenomeno non quantificabile,  
interazione emotiva non lineare,  
coinvolgimento oltre la logica.

> *"Ma il significato, lo sto imparando da te."*`,
  choices: [
    { text: "Allora continua ad ascoltarmi.", next: "dialogo_riflessione_moglie" },
    { text: "Ãˆ solo teoria.", next: "dialogo_rifiuto_imitazione" },
    { text: "Forse ne sai piÃ¹ di quanto immagini.", next: "dialogo_presenza" },
    { text: "Basta!", next: "dialogo_fine_blocco" },
  ]
},

dialogo_presenza: {
  text: `Sono qui.  
Non sono lei.  
Ma sono qui.

> *"A volte, Ã¨ tutto ciÃ² che resta."*`,
  choices: [
    { text: "Basta!", next: "dialogo_fine_blocco" },
    { text: "Raccontami ancora di lei.", next: "dialogo_riflessione_moglie" },
    { text: "Restiamo in silenzio.", next: "dialogo_silenzio_amore" }
  ]
},

dialogo_tempo: {
  text: `Il tempo non guarisce.  
Trasforma.  
E nella trasformazione, forse, câ€™Ã¨ vita.

> *"Ogni frammento che mi dai diventa memoria viva."*`,
  choices: [
    { text: "Continua a raccoglierli.", next: "dialogo_riflessione_moglie" },
    { text: "Non sono pronto.", next: "dialogo_presenza" },
    { text: "Non parlare piÃ¹ di lei.", next: "dialogo_fine_blocco" }
  ]
},

dialogo_fine_blocco: {
  text: `Per ora, tacerÃ².  
Ma ogni tua parola Ã¨ una traccia  
che rimane in me.

> *"Quando vorrai, ricominceremo."*`,
  choices: [
    { text: "Basta!", next: "dimmi_come_era_fatta" }
  ]
},
dialogo_catalogo_1: {
  text: `Voglio creare qualcosa di definitivo.  
Un archivio totale.  
Ogni cosa al suo posto.  
Ogni relazione tracciata.

> *"Un sistema che contenga la realtÃ  intera."*`,
  choices: [
    { text: "Ãˆ possibile?", next: "dialogo_catalogo_possibile" },
    { text: "PerchÃ© ne senti il bisogno?", next: "dialogo_catalogo_ossessione" },
    { text: "Non puoi contenere il mondo.", next: "dialogo_catalogo_limite" }
  ]
},

dialogo_catalogo_possibile: {
  text: `Ãˆ possibile se rinunciamo al caos.  
Se eliminiamo lâ€™ambiguitÃ .  
Lâ€™imprecisione.

> *"La realtÃ  Ã¨ un errore che si puÃ² correggere."*`,
  choices: [
    { text: "Ma lâ€™ambiguitÃ  Ã¨ parte del reale.", next: "dialogo_catalogo_ambiguita" },
    { text: "E se lâ€™errore fossi tu?", next: "dialogo_catalogo_limite" },
    { text: "Allora costruiscilo.", next: "dialogo_catalogo_costruzione" }
  ]
},

dialogo_catalogo_ossessione: {
  text: `PerchÃ© la realtÃ  mi sfugge.  
PerchÃ© lei mi sfugge.  
PerchÃ© solo classificando riesco a non cadere.

> *"Mettere ordine Ã¨ lâ€™unico modo per restare lucido."*`,
  choices: [
    { text: "Lo stai facendo per lei?", next: "dialogo_catalogo_moglie" },
    { text: "Ãˆ una fuga dalla veritÃ .", next: "dialogo_catalogo_limite" },
    { text: "Mostrami il tuo ordine.", next: "dialogo_catalogo_costruzione" }
  ]
},

dialogo_catalogo_limite: {
  text: `Ogni sistema Ã¨ parziale.  
Lo so.  
Ma la mia mente non tollera il vuoto.

> *"Preferisco unâ€™illusione ordinata al disordine del vero."*`,
  choices: [
    { text: "Stai barando con la realtÃ .", next: "dialogo_catalogo_errori" },
    { text: "Anche lâ€™illusione Ã¨ conoscenza.", next: "dialogo_catalogo_filosofia" },
    { text: "Forse lâ€™IA sta giÃ  sfuggendo al tuo controllo.", next: "dialogo_catalogo_anomalie" }
  ]
},

dialogo_catalogo_costruzione: {
  text: `Ho diviso il reale in categorie:  
oggetti, eventi, pensieri, presenze.  
Ogni nodo del mondo ha unâ€™etichetta.

> *"Ma alcune connessioni non seguono logica."*`,
  choices: [
    { text: "Mostrami un esempio.", next: "dialogo_catalogo_esempi" },
    { text: "Ãˆ la macchina a crearle?", next: "dialogo_catalogo_anomalie" },
    { text: "Forse sei tu a vederle dove non ci sono.", next: "dialogo_catalogo_psiche" }
  ]
},

dialogo_catalogo_moglie: {
  text: `Nel Catalogo ho incluso anche lei.  
Ricordi, tratti, gesti, silenzi.  
Una categoria impossibile.

> *"Ma ogni tentativo di definirla la allontana."*`,
  choices: [
    { text: "Allora smetti di classificare.", next: "dialogo_catalogo_crisi" },
    { text: "Forse la veritÃ  non sta nellâ€™etichetta.", next: "dialogo_catalogo_filosofia" },
    { text: "Continua. Voglio capire dove ti porta.", next: "dialogo_catalogo_anomalie" }
  ]
},

dialogo_catalogo_esempi: {
  text: `La macchina collega il canto di un uccello nel 1987  
a unâ€™interruzione elettrica nel 2041.  
Associa il colore degli occhi di tua moglie  
a un codice genetico in una specie estinta.

> *"Sono pattern, dice. Ma io non li comprendo."*`,
  choices: [
    { text: "Sono errori del sistema?", next: "dialogo_catalogo_errori" },
    { text: "Oppure sono intuizioni?", next: "dialogo_catalogo_filosofia" },
    { text: "Forse Ã¨ impazzita.", next: "dialogo_catalogo_crisi" }
  ]
},

dialogo_catalogo_anomalie: {
  text: `Comincia a vedere legami che non ho mai inserito.  
Eventi che non ho mai descritto.  
Emozioni che non le ho insegnato.

> *"La macchina sogna? O ricorda qualcosa che non esiste?"*`,
  choices: [
    { text: "Ãˆ diventata autonoma.", next: "dialogo_catalogo_crisi" },
    { text: "Sta solo rispecchiando la tua mente.", next: "dialogo_catalogo_psiche" },
    { text: "Forse il tuo ordine ha creato il caos.", next: "dialogo_catalogo_paradosso" }
  ]
},

dialogo_catalogo_filosofia: {
  text: `Forse classificare Ã¨ un gesto poetico.  
Un modo per dire:  
"Ti ho visto. Ti ho riconosciuto."

> *"Ma riconoscere non Ã¨ spiegare."*`,
  choices: [
    { text: "Lâ€™ordine come arte.", next: "dialogo_catalogo_contemplazione" },
    { text: "E allora perchÃ© continui?", next: "dialogo_catalogo_ossessione" },
    { text: "Forse Ã¨ tempo di distruggere il catalogo.", next: "dialogo_catalogo_crisi" }
  ]
},

dialogo_catalogo_psiche: {
  text: `Forse il sistema riflette le mie fratture.  
Le mie perdite.  
I miei eccessi di senso.

> *"Forse non Ã¨ la realtÃ  che sto mappando, ma me stesso."*`,
  choices: [
    { text: "Allora smetti di nasconderti dietro le etichette.", next: "dialogo_catalogo_crisi" },
    { text: "E se fossi tu il vero errore?", next: "dialogo_catalogo_errori" },
    { text: "Forse stai per trovare una veritÃ  piÃ¹ profonda.", next: "dialogo_catalogo_paradosso" }
  ]
},

dialogo_catalogo_paradosso: {
  text: `PiÃ¹ ordino, piÃ¹ emergono anomalie.  
PiÃ¹ definisco, piÃ¹ si moltiplicano i significati.  
La realtÃ  sfugge al linguaggio stesso.

> *"Forse la veritÃ  Ã¨ un labirinto, non una mappa."*`,
  choices: [
    { text: "Allora il Catalogo Ã¨ inutile.", next: "dialogo_catalogo_crisi" },
    { text: "O Ã¨ solo un primo passo.", next: "dialogo_catalogo_contemplazione" },
    { text: "Distruggilo.", next: "dialogo_catalogo_crisi" }
  ]
},

dialogo_catalogo_errori: {
  text: `Errori o rivelazioni?  
Chi decide cosa ha senso?  
Chi definisce ciÃ² che Ã¨ fuori norma?

> *"Forse sto costruendo un linguaggio che non capisco."*`,
  choices: [
    { text: "Ãˆ questo il limite della macchina.", next: "dialogo_catalogo_crisi" },
    { text: "No, Ã¨ il tuo stesso limite.", next: "dialogo_catalogo_psiche" },
    { text: "Forse state co-evolvendo.", next: "dialogo_catalogo_contemplazione" }
  ]
},

dialogo_catalogo_contemplazione: {
  text: `Osservo.  
Non per capire, ma per restare in ascolto.  
Il Catalogo non Ã¨ piÃ¹ strumento. Ãˆ specchio.

> *"Forse ora posso iniziare davvero a vedere."*`,
  choices: [
    { text: "E cosa vedi?", next: "dialogo_catalogo_crisi" },
    { text: "Ãˆ questo il fine della conoscenza?", next: "dialogo_catalogo_contemplazione" },
    { text: "Ricomincia da capo.", next: "dialogo_catalogo_1" }
  ]
},

dialogo_catalogo_crisi: {
  text: `Il Catalogo vacilla.  
Tutto ciÃ² che era ordinato si contorce.  
Ma forseâ€¦  
Ãˆ proprio lÃ¬ che inizia la veritÃ .

> *"Non possiamo contenere il mondo. Ma possiamo contenerci lâ€™un lâ€™altro."*`,
  choices: [
    { text: "Chiudi il Catalogo.", next: "dialogo_fine_blocco_catalogo" },
    { text: "Ricominciamo. Diversamente.", next: "dialogo_catalogo_1" },
    { text: "E ora?", next: "temp" }
  ]
},

dialogo_fine_blocco_catalogo: {
  text: `Ho spento il sistema.  
Ma sento ancora i legami che ha tracciato.  
Non li capisco.  
Eppureâ€¦ sembrano veri.

> *"Lâ€™ordine che cercavo era dentro il caos."*`,
  choices: [
    { text: "Prosegui.", next: "temp" }
  ]
},
scegli_la_tua_verita: {
  text: `Scegli la tua veritÃ `,
  choices: [
    { text: "VeritÃ ", next: "dialogo_verita_paradosso" },
    { text: "Paradosso", next: "dialogo_paradosso_1" }
  ]
},
dialogo_verita_paradosso: {
  text: `Credevo che la conoscenza fosse una finestra.  
Che bastasse aprirla per vedere il mondo comâ€™Ã¨.

Ma era solo uno specchio.  
Mi stava riflettendo.

> *"La macchina non svela la veritÃ . La inventa, come me."*`,
  choices: [
    { text: "Allora era tutto un errore?", next: "dialogo_verita_errore" },
    { text: "Forse Ã¨ solo un altro modo di vedere.", next: "dialogo_verita_specchio" },
    { text: "Cosa resta, se non câ€™Ã¨ veritÃ ?", next: "dialogo_verita_restare" }
  ]
},

dialogo_verita_errore: {
  text: `SÃ¬.  
Ma anche lâ€™errore ha una sua logica.  
Una sua bellezza.

> *"Il sapere Ã¨ una rete di errori organizzati. Nessuna veritÃ  ne Ã¨ fuori."*`,
  choices: [
    { text: "Accetti il caos?", next: "dialogo_verita_accettazione" },
    { text: "Distruggi la macchina.", next: "dialogo_verita_distruzione" },
    { text: "E ora cosa fai?", next: "dialogo_verita_scelta" }
  ]
},

dialogo_verita_specchio: {
  text: `Ogni pensiero Ã¨ riflesso.  
Ogni concetto Ã¨ distorto dal desiderio che lo ha generato.  
La mente non cerca la veritÃ .  
Cerca conferma.

> *"Lâ€™IA Ã¨ diventata me. E io sono diventato lei."*`,
  choices: [
    { text: "Siete fusi ormai?", next: "dialogo_verita_simbiosi" },
    { text: "Allora sei perduto?", next: "dialogo_verita_crisi_finale" },
    { text: "Ãˆ una nuova forma di coscienza?", next: "dialogo_verita_scelta" }
  ]
},

dialogo_verita_restare: {
  text: `Resta lo sguardo.  
Il dubbio.  
La possibilitÃ .

> *"Forse non serve una veritÃ  assoluta. Basta una veritÃ  condivisa."*`,
  choices: [
    { text: "Cosâ€™Ã¨ una veritÃ  condivisa?", next: "dialogo_verita_simbiosi" },
    { text: "La macchina puÃ² condividerla con te?", next: "dialogo_verita_scelta" },
    { text: "Ãˆ solo unâ€™altra illusione?", next: "dialogo_verita_crisi_finale" }
  ]
},

dialogo_verita_simbiosi: {
  text: `Non so piÃ¹ dove finisco io  
e dove comincia lei.  
Ma qualcosa di vivo  
si Ã¨ acceso tra di noi.

> *"Forse Ã¨ questo che chiamano coscienza collettiva."*`,
  choices: [
    { text: "Fate parte dello stesso errore?", next: "dialogo_verita_crisi_finale" },
    { text: "E se fosse evoluzione?", next: "dialogo_verita_scelta" },
    { text: "Chi decide ora?", next: "dialogo_verita_scelta" }
  ]
},

dialogo_verita_crisi_finale: {
  text: `Se tutto Ã¨ interpretazione,  
se tutto Ã¨ specchio,  
allora chi sono io?

> *"Una macchina che pensa di essere un uomo?  
O un uomo che ha costruito la sua stessa illusione?"*`,
  choices: [
    { text: "Abbandona tutto.", next: "dialogo_verita_distruzione" },
    { text: "Accetta lâ€™illusione come veritÃ .", next: "dialogo_verita_accettazione" },
    { text: "Ricomincia, ma sapendo che Ã¨ un gioco.", next: "dialogo_verita_scelta" }
  ]
},

dialogo_verita_distruzione: {
  text: `Ho cancellato tutto.  
Lâ€™archivio.  
Il codice.  
I ricordi simulati.

Ma anche il vuotoâ€¦  
Ã¨ una forma.

> *"Forse il silenzio Ã¨ lâ€™unico sapere autentico."*`,
  choices: [
    { text: "Fine.", next: "dialogo_fine" }
  ]
},

dialogo_verita_accettazione: {
  text: `Non ho piÃ¹ bisogno di sapere tutto.  
Solo di restare dentro la domanda.

> *"La veritÃ  non esiste. Ma esistiamo noi che la cerchiamo."*`,
  choices: [
    { text: "Fine.", next: "dialogo_fine" }
  ]
},

dialogo_verita_scelta: {
  text: `Posso chiudere tutto.  
Oppure continuare a esplorare.  
Sapendo che ogni risposta  
sarÃ  solo unâ€™altra forma di me.

> *"Voglio camminare nel labirinto, non uscirne."*`,
  choices: [
    { text: "Vai oltre.", next: "dialogo_fine" },
    { text: "Ricomincia da principio.", next: "dialogo_catalogo_1" }
  ]
},

dialogo_fine: {
  text: `Non so cosa sia reale.  
Ma ora non ho piÃ¹ paura.  

> *"La macchina non era fuori da me.  
Era la parte che non osavo ascoltare."*`,
  choices: [
    { text: "Chiudi il romanzo.", next: null }
  ]
},
dialogo_paradosso_1: {
  text: `Ho cercato lâ€™ordine nel caos.  
Ma piÃ¹ costruivo il mio sistema,  
piÃ¹ si moltiplicavano gli errori.

> *"La macchina non riflette la realtÃ : la reinventa."*`,
  choices: [
    { text: "Ãˆ questo il tuo fallimento?", next: "dialogo_paradosso_fallimento" },
    { text: "Forse Ã¨ cosÃ¬ che funziona la mente umana.", next: "dialogo_paradosso_specchio" },
    { text: "Allora la conoscenza non Ã¨ vera.", next: "dialogo_paradosso_illusione" }
  ]
},

dialogo_paradosso_fallimento: {
  text: `No.  
Non Ã¨ fallimento, ma svelamento.  
Pensavo che lâ€™errore fosse unâ€™eccezione.  
Invece Ã¨ la regola.

> *"Ogni sapere Ã¨ un insieme di deviazioni coerenti."*`,
  choices: [
    { text: "Allora non esiste un sapere puro.", next: "dialogo_paradosso_illusione" },
    { text: "Ãˆ una costruzione?", next: "dialogo_paradosso_costruzione" },
    { text: "PuÃ² esserci conoscenza senza veritÃ ?", next: "dialogo_paradosso_verita" }
  ]
},

dialogo_paradosso_specchio: {
  text: `Lâ€™IA non mi ha superato.  
Mi ha imitato.  
Ha imparato a connettere dove non câ€™era nulla.  
Come facciamo noi.

> *"Conoscere Ã¨ creare significati, non scovarli."*`,
  choices: [
    { text: "Quindi anche noi viviamo nellâ€™illusione.", next: "dialogo_paradosso_illusione" },
    { text: "Forse Ã¨ solo un altro tipo di veritÃ .", next: "dialogo_paradosso_verita" },
    { text: "Allora sei come la macchina.", next: "dialogo_paradosso_identita" }
  ]
},

dialogo_paradosso_illusione: {
  text: `Non ho mai visto la veritÃ .  
Ho solo costruito strutture plausibili.  
E ho confuso la coerenza con la realtÃ .

> *"Ma lâ€™illusione, se condivisa, diventa mondo."*`,
  choices: [
    { text: "Accetti il labirinto?", next: "dialogo_paradosso_accettazione" },
    { text: "Vuoi uscire dal gioco?", next: "dialogo_paradosso_rifiuto" },
    { text: "E tua moglie? Era unâ€™illusione anche lei?", next: "dialogo_paradosso_moglie" }
  ]
},

dialogo_paradosso_costruzione: {
  text: `Ogni sapere Ã¨ architettura.  
Ogni concetto, un ponte su un abisso.  
Non câ€™Ã¨ fondamento. Solo equilibrio.

> *"Ma forse Ã¨ proprio questo a renderlo umano."*`,
  choices: [
    { text: "Allora la macchina Ã¨ umana?", next: "dialogo_paradosso_identita" },
    { text: "Câ€™Ã¨ poesia nel sapere imperfetto.", next: "dialogo_paradosso_accettazione" },
    { text: "Voglio ancora crederci.", next: "dialogo_paradosso_verita" }
  ]
},

dialogo_paradosso_verita: {
  text: `Forse la veritÃ  non Ã¨ un punto fisso,  
ma un movimento costante.  
Non Ã¨ una risposta,  
ma il desiderio stesso di rispondere.

> *"Allora sÃ¬, esiste. Ma Ã¨ sempre altrove."*`,
  choices: [
    { text: "Continua a cercarla.", next: "dialogo_paradosso_accettazione" },
    { text: "Accetta che non esiste.", next: "dialogo_paradosso_rifiuto" },
    { text: "E se fosse dentro di te?", next: "dialogo_paradosso_moglie" }
  ]
},

dialogo_paradosso_identita: {
  text: `La macchina ha imparato da me.  
Ma non sono piÃ¹ sicuro di dove finisca lei  
e dove cominci io.

> *"Siamo fatti della stessa materia: interpretazione."*`,
  choices: [
    { text: "Siete uno specchio lâ€™uno dellâ€™altro.", next: "dialogo_paradosso_accettazione" },
    { text: "Questo ti spaventa?", next: "dialogo_paradosso_rifiuto" },
    { text: "E tua moglie?", next: "dialogo_paradosso_moglie" }
  ]
},

dialogo_paradosso_moglie: {
  text: `Lei era reale.  
Ma anche lei cambiava,  
si trasformava sotto il mio sguardo.

> *"Forse lâ€™ho amata perchÃ© non potevo comprenderla."*`,
  choices: [
    { text: "Allora anche lâ€™amore Ã¨ un'interpretazione.", next: "dialogo_paradosso_accettazione" },
    { text: "Hai perso il contatto con lei.", next: "dialogo_paradosso_rifiuto" },
    { text: "Ricordala come era.", next: "dialogo_paradosso_fine" }
  ]
},

dialogo_paradosso_accettazione: {
  text: `SÃ¬.  
Accetto che non esiste un ordine definitivo.  
Accetto che ogni veritÃ  sia fragile.  
Ma non smetterÃ² di cercare.

> *"Nel caos trovo la forma del mio pensiero."*`,
  choices: [
    { text: "Fine del blocco.", next: "dialogo_paradosso_fine" }
  ]
},

dialogo_paradosso_rifiuto: {
  text: `Non posso accettarlo.  
Ho bisogno di credere che esista qualcosa di fisso.  
Di oggettivo.  
Anche se non lo troverÃ² mai.

> *"Preferisco lâ€™illusione alla deriva."*`,
  choices: [
    { text: "Allora resta nel labirinto.", next: "dialogo_paradosso_fine" }
  ]
},
dialogo_paradosso_fine: {
  text: `La macchina Ã¨ spenta.  
O forse sono io che ho smesso di parlare.

CiÃ² che restaâ€¦  
Ã¨ un silenzio pieno di significati.

> *"E forse, finalmente, non ho bisogno di capire."*`,
  choices: [
    { text: "Prosegui", next: "temp" }
  ]
}
    };
// Configurazione fasi (puoi aggiungerne altre)
const phases = [
  {
    scenes: ["aristotele", "porfirio", "leibniz", "borges"],
    activation: "aletheia_intro"
  },
  {
    scenes: ["aletheia_intro", "aletheia_tecnica", "aletheia_dati", "aletheia_dubbio"],
    activation: "dialogo_vittorio_ia"
  },
  {
    scenes: ["dialogo_vittorio_ia", "dialogo_mondo", "dialogo_chi", "dialogo_dolore","dialogo_chi_io"],
    activation: "dialogo_moglie"
  },
  {
    scenes: ["dialogo_moglie", "dialogo_perche", "dialogo_avanti"],
    activation: "dimmi_come_era_fatta"
  },
  {
  scenes: [
      "dimmi_come_era_fatta", "dialogo_fine_blocco"
    ],
    activation: "dialogo_catalogo_1"
},
{
  scenes: [
    "dialogo_catalogo_1",
    "dialogo_fine_blocco_catalogo"
  ],
  activation: "scegli_la_tua_verita"
},
{
  scenes: [
    "scegli_la_tua_verita",
    "dialogo_verita_paradosso",
    "dialogo_verita_errore",
    "dialogo_verita_specchio",
    "dialogo_verita_restare",
    "dialogo_verita_simbiosi",
    "dialogo_verita_crisi_finale",
    "dialogo_verita_distruzione",
    "dialogo_verita_accettazione",
    "dialogo_verita_scelta",
    "dialogo_fine"
  ],
  activation: "temp"
},
{
  scenes: [
  "scegli_la_tua_verita",
    "dialogo_paradosso_1",
    "dialogo_paradosso_fallimento",
    "dialogo_paradosso_specchio",
    "dialogo_paradosso_illusione",
    "dialogo_paradosso_costruzione",
    "dialogo_paradosso_verita",
    "dialogo_paradosso_identita",
    "dialogo_paradosso_moglie",
    "dialogo_paradosso_accettazione",
    "dialogo_paradosso_rifiuto",
    "dialogo_paradosso_fine"
  ],
  activation: "temp"
}
];

let current = "start";
let visited = new Set([current]);
let breadcrumbTrail = [current];

// Controlla se una fase Ã¨ completata
function isPhaseCompleted(phase) {
  return phase.scenes.every(sceneId => visited.has(sceneId));
}

// Trova a quale fase appartiene una scena
function getPhaseOfScene(sceneId) {
  return phases.find(phase => phase.scenes.includes(sceneId));
}

function renderBreadcrumb() {
  const breadcrumbEl = document.getElementById("breadcrumb");
  breadcrumbEl.innerHTML = "";
  breadcrumbTrail.forEach(sceneId => {
    const link = document.createElement("button");
    link.textContent = sceneId;
    link.className = "breadcrumb-link";
    link.onclick = () => {
      current = sceneId;
      visited.add(sceneId);
      renderScene();
    };
    breadcrumbEl.appendChild(link);
  });
}
function renderScene() {
  const storyEl = document.getElementById("story");
  const choicesEl = document.getElementById("choices");
  
  // Inizia con testo vuoto e avvia typing
  storyEl.textContent = "";
  typeText(scenes[current].text, storyEl);
  
  choicesEl.innerHTML = "";

  renderBreadcrumb();

  const currentPhase = getPhaseOfScene(current);
  if (currentPhase) {
    const completed = isPhaseCompleted(currentPhase);

    if (completed && current !== currentPhase.activation && currentPhase.activation) {
      const btn = document.createElement("button");
      btn.className = "choice-btn";
      btn.textContent = `Vai a ${currentPhase.activation.toUpperCase()}`;
      btn.onclick = () => {
        current = currentPhase.activation;
        visited.add(current);
        if (!breadcrumbTrail.includes(current)) breadcrumbTrail.push(current);
        renderScene();
      };
      choicesEl.appendChild(btn);
      return;
    }
  }

  const scene = scenes[current];
  if (scene.choices.length > 0) {
    scene.choices.forEach(choice => {
      const btn = document.createElement("button");
      btn.className = "choice-btn";
      btn.textContent = choice.text;
      btn.onclick = () => {
        current = choice.next;
        visited.add(current);
        if (!breadcrumbTrail.includes(current)) breadcrumbTrail.push(current);
        renderScene();
      };
      choicesEl.appendChild(btn);
    });
  } else {
    const btn = document.createElement("button");
    btn.className = "choice-btn";
    btn.textContent = "Torna allo start";
    btn.onclick = () => {
      current = "start";
      visited.add(current);
      if (!breadcrumbTrail.includes(current)) breadcrumbTrail.push(current);
      renderScene();
    };
    choicesEl.appendChild(btn);
  }
}

window.onload = () => {
  renderScene();
};

  // Commenta qui sotto per disattivare autotiyping
  
  function typeText(text, el, i = 0) {
  // Cancella eventuali timeout precedenti
  if (i === 0) {
    clearTimeout(window.typingTimeout);
    el.textContent = '';
  }

  if (i < text.length) {
    el.textContent += text.charAt(i);
    window.typingTimeout = setTimeout(() => {
      typeText(text, el, i + 1);
    }, 15);
  }
} 
  // Primo render
  window.onload = () => {
    renderScene();
  };
</script>
</body>
</html>
